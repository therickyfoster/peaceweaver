<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Peaceweaver Exponential - Next-Generation Regenerative Intelligence Platform</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Advanced regenerative intelligence platform with real-time global monitoring, predictive analytics, impact modeling, and comprehensive peace-building tools">
<style>
/* =================================================================
   EXPONENTIAL AMPLIFICATION - 100X MORE FEATURES
   - Advanced data visualization engine
   - Real-time simulation capabilities
   - Predictive analytics dashboard
   - Network graph visualization
   - Interactive timeline system
   - Multi-dimensional filtering
   - Impact calculation models
   - Educational module system
   - Project management suite
   - And 90+ additional advanced features
================================================================= */

@import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Crimson+Pro:wght@300;400;600;700&family=DM+Sans:wght@400;500;700&display=swap');

:root {
  /* Advanced Color System - Layered Complexity */
  --bg-deep: #010409;
  --bg-primary: #0d1117;
  --bg-secondary: #161b22;
  --bg-tertiary: #21262d;
  --bg-elevated: #30363d;
  
  --emerald-50: #ecfdf5;
  --emerald-100: #d1fae5;
  --emerald-200: #a7f3d0;
  --emerald-300: #6ee7b7;
  --emerald-400: #34d399;
  --emerald-500: #10b981;
  --emerald-600: #059669;
  --emerald-700: #047857;
  --emerald-800: #065f46;
  --emerald-900: #064e3b;
  
  --cyan-400: #22d3ee;
  --cyan-500: #06b6d4;
  --cyan-600: #0891b2;
  
  --amber-400: #fbbf24;
  --amber-500: #f59e0b;
  
  --rose-400: #fb7185;
  --rose-500: #f43f5e;
  
  --text-primary: #f0f6fc;
  --text-secondary: #8b949e;
  --text-tertiary: #484f58;
  
  --border-primary: rgba(52, 211, 153, 0.2);
  --border-secondary: rgba(255, 255, 255, 0.1);
  
  --shadow-glow: 0 0 40px rgba(16, 185, 129, 0.3);
  --shadow-intense: 0 0 60px rgba(16, 185, 129, 0.5);
  
  /* Typography System */
  --font-display: 'Crimson Pro', serif;
  --font-body: 'DM Sans', sans-serif;
  --font-mono: 'Space Mono', monospace;
  
  /* Advanced Spacing Grid */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  --space-3xl: 4rem;
  
  /* Animation Timing */
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --ease-expo: cubic-bezier(0.19, 1, 0.22, 1);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  scroll-behavior: smooth;
  font-size: 16px;
}

body {
  font-family: var(--font-body);
  background: var(--bg-deep);
  color: var(--text-primary);
  line-height: 1.6;
  overflow-x: hidden;
  min-height: 100vh;
}

/* =================================================================
   EXPONENTIAL BACKGROUND SYSTEM - Layered Atmospheric Effects
================================================================= */
.background-system {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}

.bg-layer {
  position: absolute;
  inset: 0;
}

#particle-field {
  opacity: 0.4;
}

.bg-gradient-1 {
  background: radial-gradient(circle at 20% 30%, rgba(16, 185, 129, 0.15) 0%, transparent 50%);
}

.bg-gradient-2 {
  background: radial-gradient(circle at 80% 70%, rgba(6, 182, 212, 0.1) 0%, transparent 50%);
}

.bg-gradient-3 {
  background: radial-gradient(circle at 50% 50%, rgba(52, 211, 153, 0.05) 0%, transparent 70%);
  animation: pulse-gradient 15s ease-in-out infinite;
}

.bg-noise {
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
}

@keyframes pulse-gradient {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.1); }
}

/* =================================================================
   ADVANCED HEADER SYSTEM with Multi-Modal Navigation
================================================================= */
#main-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  background: rgba(13, 17, 23, 0.8);
  backdrop-filter: blur(20px) saturate(180%);
  border-bottom: 1px solid var(--border-primary);
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
}

.header-content {
  max-width: 2000px;
  margin: 0 auto;
  padding: var(--space-md) var(--space-xl);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-xl);
}

.brand-lockup {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.brand-icon {
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, var(--emerald-500), var(--cyan-500));
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  box-shadow: var(--shadow-glow);
  animation: float-icon 6s ease-in-out infinite;
}

@keyframes float-icon {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  50% { transform: translateY(-8px) rotate(5deg); }
}

.brand-text h1 {
  font-family: var(--font-display);
  font-size: 1.5rem;
  font-weight: 700;
  letter-spacing: -0.02em;
  background: linear-gradient(135deg, var(--emerald-300), var(--cyan-400));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.brand-text p {
  font-size: 0.75rem;
  color: var(--text-secondary);
  font-family: var(--font-mono);
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.nav-system {
  display: flex;
  gap: var(--space-sm);
}

.nav-tab {
  padding: var(--space-sm) var(--space-lg);
  background: transparent;
  border: 1px solid transparent;
  border-radius: 8px;
  color: var(--text-secondary);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s var(--ease-smooth);
  font-family: var(--font-body);
}

.nav-tab:hover {
  background: rgba(52, 211, 153, 0.1);
  border-color: var(--border-primary);
  color: var(--emerald-300);
}

.nav-tab.active {
  background: rgba(52, 211, 153, 0.2);
  border-color: var(--emerald-500);
  color: var(--emerald-300);
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
}

.header-actions {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
}

.action-btn {
  padding: var(--space-sm) var(--space-lg);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 8px;
  color: var(--text-primary);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s var(--ease-smooth);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.action-btn:hover {
  background: var(--bg-elevated);
  border-color: var(--emerald-500);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
}

.action-btn.primary {
  background: linear-gradient(135deg, var(--emerald-600), var(--cyan-600));
  border-color: transparent;
  color: white;
  font-weight: 600;
}

.action-btn.primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
}

/* =================================================================
   MAIN CONTENT SYSTEM - Multi-View Dashboard
================================================================= */
#app-container {
  position: relative;
  z-index: 1;
  margin-top: 80px;
  min-height: calc(100vh - 80px);
}

.view-container {
  display: none;
  max-width: 2000px;
  margin: 0 auto;
  padding: var(--space-2xl);
  animation: fade-in-up 0.6s var(--ease-expo);
}

.view-container.active {
  display: block;
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* =================================================================
   COMMAND CENTER - Advanced Dashboard Grid
================================================================= */
.command-grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: var(--space-lg);
  margin-bottom: var(--space-2xl);
}

.command-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: 16px;
  padding: var(--space-xl);
  position: relative;
  overflow: hidden;
  transition: all 0.3s var(--ease-smooth);
}

.command-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--emerald-500), transparent);
  opacity: 0;
  transition: opacity 0.3s;
}

.command-card:hover {
  border-color: var(--border-primary);
  transform: translateY(-4px);
  box-shadow: 0 12px 40px rgba(16, 185, 129, 0.2);
}

.command-card:hover::before {
  opacity: 1;
}

.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-lg);
}

.card-title {
  font-family: var(--font-display);
  font-size: 1.3rem;
  font-weight: 600;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.card-icon {
  font-size: 1.5rem;
  filter: drop-shadow(0 0 8px currentColor);
}

.card-badge {
  padding: var(--space-xs) var(--space-sm);
  background: rgba(52, 211, 153, 0.2);
  border: 1px solid var(--emerald-500);
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--emerald-300);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Grid Sizing Classes */
.span-3 { grid-column: span 3; }
.span-4 { grid-column: span 4; }
.span-6 { grid-column: span 6; }
.span-8 { grid-column: span 8; }
.span-12 { grid-column: span 12; }

/* =================================================================
   MEGA STAT SYSTEM - Advanced Metrics Display
================================================================= */
.mega-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--space-lg);
  margin-bottom: var(--space-2xl);
}

.mega-stat {
  background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
  border: 1px solid var(--border-primary);
  border-radius: 16px;
  padding: var(--space-xl);
  position: relative;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.3s var(--ease-smooth);
}

.mega-stat::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), rgba(52, 211, 153, 0.1), transparent);
  opacity: 0;
  transition: opacity 0.3s;
}

.mega-stat:hover::after {
  opacity: 1;
}

.mega-stat:hover {
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 16px 50px rgba(16, 185, 129, 0.3);
  border-color: var(--emerald-500);
}

.stat-label {
  font-size: 0.85rem;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.1em;
  margin-bottom: var(--space-sm);
  font-weight: 600;
}

.stat-value {
  font-family: var(--font-mono);
  font-size: 3rem;
  font-weight: 700;
  background: linear-gradient(135deg, var(--emerald-300), var(--cyan-400));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: var(--space-sm);
  line-height: 1;
}

.stat-trend {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: 0.9rem;
  color: var(--emerald-400);
  font-weight: 600;
}

.stat-trend.up::before { content: '‚ñ≤'; }
.stat-trend.down::before { content: '‚ñº'; }

.stat-sparkline {
  margin-top: var(--space-md);
  height: 40px;
  opacity: 0.6;
}

/* =================================================================
   INTERACTIVE WORLD MAP - Advanced Geospatial Visualization
================================================================= */
.world-map-container {
  position: relative;
  height: 600px;
  background: var(--bg-primary);
  border-radius: 16px;
  border: 1px solid var(--border-secondary);
  overflow: hidden;
}

#world-map-canvas {
  width: 100%;
  height: 100%;
  cursor: crosshair;
}

.map-controls {
  position: absolute;
  top: var(--space-lg);
  right: var(--space-lg);
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.map-control-btn {
  width: 40px;
  height: 40px;
  background: rgba(13, 17, 23, 0.9);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  transition: all 0.2s;
}

.map-control-btn:hover {
  background: var(--emerald-600);
  transform: scale(1.1);
}

.map-legend {
  position: absolute;
  bottom: var(--space-lg);
  left: var(--space-lg);
  background: rgba(13, 17, 23, 0.95);
  border: 1px solid var(--border-primary);
  border-radius: 12px;
  padding: var(--space-md);
  backdrop-filter: blur(10px);
}

.legend-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-bottom: var(--space-sm);
  font-size: 0.85rem;
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  box-shadow: 0 0 10px currentColor;
}

.map-tooltip {
  position: absolute;
  background: rgba(13, 17, 23, 0.95);
  border: 1px solid var(--emerald-500);
  border-radius: 8px;
  padding: var(--space-md);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s;
  max-width: 300px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
}

.map-tooltip.visible {
  opacity: 1;
}

/* =================================================================
   ADVANCED CHARTS SYSTEM - Multiple Visualization Types
================================================================= */
.chart-container {
  height: 400px;
  position: relative;
  background: var(--bg-primary);
  border-radius: 12px;
  padding: var(--space-lg);
}

.chart-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-lg);
}

.chart-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
}

.chart-filters {
  display: flex;
  gap: var(--space-sm);
}

.chart-filter {
  padding: var(--space-xs) var(--space-md);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 6px;
  color: var(--text-secondary);
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s;
}

.chart-filter:hover,
.chart-filter.active {
  background: rgba(52, 211, 153, 0.2);
  border-color: var(--emerald-500);
  color: var(--emerald-300);
}

.chart-canvas {
  width: 100%;
  height: calc(100% - 60px);
}

/* =================================================================
   NETWORK GRAPH VISUALIZATION - Connection Mapping
================================================================= */
.network-container {
  position: relative;
  height: 500px;
  background: var(--bg-primary);
  border-radius: 16px;
  border: 1px solid var(--border-secondary);
  overflow: hidden;
}

#network-canvas {
  width: 100%;
  height: 100%;
}

.network-info {
  position: absolute;
  top: var(--space-lg);
  left: var(--space-lg);
  background: rgba(13, 17, 23, 0.95);
  border: 1px solid var(--border-primary);
  border-radius: 12px;
  padding: var(--space-md);
  backdrop-filter: blur(10px);
}

.network-stat {
  display: flex;
  justify-content: space-between;
  gap: var(--space-lg);
  margin-bottom: var(--space-xs);
  font-size: 0.85rem;
}

.network-stat-label {
  color: var(--text-secondary);
}

.network-stat-value {
  color: var(--emerald-300);
  font-weight: 600;
  font-family: var(--font-mono);
}

/* =================================================================
   PROJECT MANAGEMENT SYSTEM - Comprehensive Tracking
================================================================= */
.project-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: var(--space-lg);
}

.project-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: 16px;
  padding: var(--space-xl);
  transition: all 0.3s var(--ease-smooth);
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.project-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: var(--emerald-500);
  transform: scaleY(0);
  transition: transform 0.3s var(--ease-smooth);
}

.project-card:hover::before {
  transform: scaleY(1);
}

.project-card:hover {
  transform: translateX(8px);
  border-color: var(--border-primary);
  box-shadow: -4px 8px 30px rgba(16, 185, 129, 0.2);
}

.project-header {
  display: flex;
  justify-content: space-between;
  align-items: start;
  margin-bottom: var(--space-md);
}

.project-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: var(--space-xs);
}

.project-location {
  font-size: 0.85rem;
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.project-status {
  padding: var(--space-xs) var(--space-sm);
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
}

.status-active {
  background: rgba(16, 185, 129, 0.2);
  color: var(--emerald-300);
}

.status-planning {
  background: rgba(251, 191, 36, 0.2);
  color: var(--amber-400);
}

.status-completed {
  background: rgba(6, 182, 212, 0.2);
  color: var(--cyan-400);
}

.project-metrics {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-md);
  margin: var(--space-lg) 0;
}

.project-metric {
  text-align: center;
}

.metric-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--emerald-300);
  font-family: var(--font-mono);
}

.metric-label {
  font-size: 0.75rem;
  color: var(--text-secondary);
  text-transform: uppercase;
}

.project-progress {
  margin-top: var(--space-lg);
}

.progress-label {
  display: flex;
  justify-content: space-between;
  margin-bottom: var(--space-sm);
  font-size: 0.85rem;
}

.progress-bar {
  height: 8px;
  background: var(--bg-tertiary);
  border-radius: 4px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--emerald-600), var(--cyan-500));
  border-radius: 4px;
  transition: width 1s var(--ease-expo);
  box-shadow: 0 0 10px var(--emerald-500);
}

/* =================================================================
   IMPACT CALCULATOR - Advanced Modeling System
================================================================= */
.calculator-panel {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 16px;
  padding: var(--space-2xl);
}

.calc-section {
  margin-bottom: var(--space-2xl);
}

.calc-section-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--emerald-300);
  margin-bottom: var(--space-lg);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.input-group {
  margin-bottom: var(--space-lg);
}

.input-label {
  display: block;
  font-size: 0.9rem;
  color: var(--text-secondary);
  margin-bottom: var(--space-sm);
  font-weight: 500;
}

.input-field {
  width: 100%;
  padding: var(--space-md);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 8px;
  color: var(--text-primary);
  font-size: 1rem;
  font-family: var(--font-body);
  transition: all 0.2s;
}

.input-field:focus {
  outline: none;
  border-color: var(--emerald-500);
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

.slider-input {
  width: 100%;
  height: 8px;
  -webkit-appearance: none;
  appearance: none;
  background: var(--bg-tertiary);
  border-radius: 4px;
  outline: none;
}

.slider-input::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 24px;
  height: 24px;
  background: linear-gradient(135deg, var(--emerald-500), var(--cyan-500));
  cursor: pointer;
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
}

.slider-input::-moz-range-thumb {
  width: 24px;
  height: 24px;
  background: linear-gradient(135deg, var(--emerald-500), var(--cyan-500));
  cursor: pointer;
  border-radius: 50%;
  border: none;
  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
}

.slider-value {
  display: flex;
  justify-content: space-between;
  margin-top: var(--space-sm);
  font-size: 0.85rem;
  color: var(--text-secondary);
}

.results-panel {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(6, 182, 212, 0.05));
  border: 2px solid var(--emerald-500);
  border-radius: 16px;
  padding: var(--space-2xl);
  margin-top: var(--space-2xl);
}

.results-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--emerald-300);
  margin-bottom: var(--space-xl);
  text-align: center;
}

.results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-lg);
}

.result-item {
  text-align: center;
}

.result-value {
  font-size: 2.5rem;
  font-weight: 700;
  background: linear-gradient(135deg, var(--emerald-300), var(--cyan-400));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-family: var(--font-mono);
  margin-bottom: var(--space-sm);
}

.result-label {
  font-size: 0.9rem;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* =================================================================
   TIMELINE SYSTEM - Historical Visualization
================================================================= */
.timeline-container {
  position: relative;
  padding: var(--space-2xl) 0;
}

.timeline-line {
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 2px;
  background: linear-gradient(180deg, transparent, var(--emerald-500), transparent);
  transform: translateX(-50%);
}

.timeline-item {
  display: flex;
  gap: var(--space-2xl);
  margin-bottom: var(--space-3xl);
  position: relative;
}

.timeline-item:nth-child(even) {
  flex-direction: row-reverse;
}

.timeline-content {
  flex: 1;
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: 16px;
  padding: var(--space-xl);
  transition: all 0.3s var(--ease-smooth);
}

.timeline-content:hover {
  border-color: var(--emerald-500);
  transform: scale(1.02);
  box-shadow: 0 8px 30px rgba(16, 185, 129, 0.2);
}

.timeline-date {
  font-size: 0.85rem;
  color: var(--emerald-300);
  font-weight: 600;
  margin-bottom: var(--space-sm);
  font-family: var(--font-mono);
}

.timeline-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: var(--space-sm);
}

.timeline-description {
  color: var(--text-secondary);
  line-height: 1.6;
}

.timeline-marker {
  position: absolute;
  left: 50%;
  top: var(--space-xl);
  transform: translateX(-50%);
  width: 20px;
  height: 20px;
  background: var(--emerald-500);
  border: 4px solid var(--bg-deep);
  border-radius: 50%;
  box-shadow: 0 0 20px var(--emerald-500);
  z-index: 10;
}

/* =================================================================
   EDUCATIONAL MODULES - Learning System
================================================================= */
.module-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--space-lg);
}

.module-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: 16px;
  overflow: hidden;
  transition: all 0.3s var(--ease-smooth);
  cursor: pointer;
}

.module-card:hover {
  transform: translateY(-6px);
  border-color: var(--emerald-500);
  box-shadow: 0 12px 40px rgba(16, 185, 129, 0.2);
}

.module-thumbnail {
  height: 180px;
  background: linear-gradient(135deg, var(--emerald-600), var(--cyan-600));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 4rem;
  position: relative;
  overflow: hidden;
}

.module-thumbnail::before {
  content: '';
  position: absolute;
  inset: 0;
  background: url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h60v60H0z' fill='none'/%3E%3Cpath d='M0 0h30v30H0zM30 30h30v30H30z' fill='rgba(255,255,255,0.05)'/%3E%3C/svg%3E");
  opacity: 0.3;
}

.module-body {
  padding: var(--space-xl);
}

.module-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: var(--space-sm);
}

.module-meta {
  display: flex;
  gap: var(--space-md);
  margin-bottom: var(--space-md);
  font-size: 0.85rem;
  color: var(--text-secondary);
}

.module-description {
  color: var(--text-secondary);
  line-height: 1.6;
  margin-bottom: var(--space-lg);
}

.module-progress {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: var(--space-md);
  border-top: 1px solid var(--border-secondary);
}

.progress-text {
  font-size: 0.85rem;
  color: var(--text-secondary);
}

.progress-percentage {
  font-weight: 600;
  color: var(--emerald-300);
  font-family: var(--font-mono);
}

/* =================================================================
   SEARCH & FILTER SYSTEM - Advanced Discovery
================================================================= */
.search-bar {
  position: relative;
  margin-bottom: var(--space-xl);
}

.search-input {
  width: 100%;
  padding: var(--space-lg) var(--space-xl);
  padding-left: 60px;
  background: var(--bg-secondary);
  border: 2px solid var(--border-secondary);
  border-radius: 16px;
  color: var(--text-primary);
  font-size: 1.1rem;
  font-family: var(--font-body);
  transition: all 0.3s;
}

.search-input:focus {
  outline: none;
  border-color: var(--emerald-500);
  box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
  background: var(--bg-tertiary);
}

.search-icon {
  position: absolute;
  left: var(--space-lg);
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.5rem;
  color: var(--text-secondary);
}

.filter-bar {
  display: flex;
  gap: var(--space-md);
  flex-wrap: wrap;
  margin-bottom: var(--space-xl);
}

.filter-chip {
  padding: var(--space-sm) var(--space-lg);
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 20px;
  color: var(--text-secondary);
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.filter-chip:hover,
.filter-chip.active {
  background: rgba(52, 211, 153, 0.2);
  border-color: var(--emerald-500);
  color: var(--emerald-300);
}

.filter-chip.active::before {
  content: '‚úì';
  font-weight: bold;
}

/* =================================================================
   DATA TABLE SYSTEM - Advanced Grid
================================================================= */
.data-table-container {
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: 16px;
  overflow: hidden;
}

.data-table {
  width: 100%;
  border-collapse: collapse;
}

.data-table th {
  background: var(--bg-tertiary);
  padding: var(--space-md) var(--space-lg);
  text-align: left;
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-bottom: 1px solid var(--border-secondary);
}

.data-table td {
  padding: var(--space-md) var(--space-lg);
  border-bottom: 1px solid var(--border-secondary);
  color: var(--text-primary);
}

.data-table tr:hover td {
  background: rgba(52, 211, 153, 0.05);
}

.data-table tr:last-child td {
  border-bottom: none;
}

/* =================================================================
   NOTIFICATION SYSTEM - Toast Messages
================================================================= */
.notification-container {
  position: fixed;
  top: 100px;
  right: var(--space-xl);
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
  pointer-events: none;
}

.notification {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 12px;
  padding: var(--space-lg);
  min-width: 300px;
  max-width: 400px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
  pointer-events: all;
  animation: slide-in-right 0.3s var(--ease-expo);
  display: flex;
  align-items: start;
  gap: var(--space-md);
}

@keyframes slide-in-right {
  from {
    transform: translateX(400px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.notification-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.notification-content {
  flex: 1;
}

.notification-title {
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: var(--space-xs);
}

.notification-message {
  font-size: 0.9rem;
  color: var(--text-secondary);
}

.notification.success {
  border-color: var(--emerald-500);
}

.notification.warning {
  border-color: var(--amber-500);
}

.notification.error {
  border-color: var(--rose-500);
}

/* =================================================================
   MODAL SYSTEM - Overlay Dialogs
================================================================= */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(8px);
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-xl);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
}

.modal-overlay.active {
  opacity: 1;
  pointer-events: all;
}

.modal-content {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 16px;
  max-width: 800px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  transform: scale(0.9);
  transition: transform 0.3s var(--ease-expo);
}

.modal-overlay.active .modal-content {
  transform: scale(1);
}

.modal-header {
  padding: var(--space-xl);
  border-bottom: 1px solid var(--border-secondary);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--text-primary);
}

.modal-close {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  transition: all 0.2s;
}

.modal-close:hover {
  background: var(--rose-500);
  border-color: var(--rose-400);
  transform: rotate(90deg);
}

.modal-body {
  padding: var(--space-2xl);
}

/* =================================================================
   LOADING STATES
================================================================= */
.loading-spinner {
  display: inline-block;
  width: 40px;
  height: 40px;
  border: 3px solid rgba(52, 211, 153, 0.2);
  border-top-color: var(--emerald-500);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.skeleton {
  background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-elevated) 50%, var(--bg-tertiary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 8px;
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* =================================================================
   RESPONSIVE DESIGN - Mobile Optimization
================================================================= */
@media (max-width: 1024px) {
  .command-grid {
    grid-template-columns: 1fr;
  }
  
  .span-3, .span-4, .span-6, .span-8, .span-12 {
    grid-column: span 1;
  }
  
  .nav-system {
    display: none;
  }
  
  .timeline-item {
    flex-direction: column !important;
  }
  
  .timeline-line {
    left: var(--space-lg);
  }
}

@media (max-width: 768px) {
  .header-content {
    padding: var(--space-md);
  }
  
  .brand-lockup {
    flex-direction: column;
    align-items: start;
    gap: var(--space-sm);
  }
  
  .header-actions {
    display: none;
  }
  
  .view-container {
    padding: var(--space-md);
  }
  
  .mega-stats {
    grid-template-columns: 1fr;
  }
  
  .world-map-container {
    height: 400px;
  }
  
  .project-grid,
  .module-grid {
    grid-template-columns: 1fr;
  }
}

/* =================================================================
   UTILITY CLASSES
================================================================= */
.text-center { text-align: center; }
.text-right { text-align: right; }
.mt-lg { margin-top: var(--space-lg); }
.mb-lg { margin-bottom: var(--space-lg); }
.mb-xl { margin-bottom: var(--space-xl); }
.mb-2xl { margin-bottom: var(--space-2xl); }
.hidden { display: none !important; }
.flex { display: flex; }
.flex-center { display: flex; align-items: center; justify-content: center; }
.gap-md { gap: var(--space-md); }
.gap-lg { gap: var(--space-lg); }

/* =================================================================
   PRINT STYLES
================================================================= */
@media print {
  .background-system,
  #main-header,
  .header-actions,
  .nav-system,
  .map-controls,
  .action-btn {
    display: none !important;
  }
  
  body {
    background: white;
    color: black;
  }
  
  .command-card,
  .project-card,
  .module-card {
    break-inside: avoid;
  }
}

/* =================================================================
   ACCESSIBILITY
================================================================= */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

*:focus-visible {
  outline: 2px solid var(--emerald-500);
  outline-offset: 2px;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}
</style>
</head>
<body>

<!-- Background System -->
<div class="background-system">
  <canvas id="particle-field" class="bg-layer"></canvas>
  <div class="bg-layer bg-gradient-1"></div>
  <div class="bg-layer bg-gradient-2"></div>
  <div class="bg-layer bg-gradient-3"></div>
  <div class="bg-layer bg-noise"></div>
</div>

<!-- Main Header -->
<header id="main-header">
  <div class="header-content">
    <div class="brand-lockup">
      <div class="brand-icon">üåç</div>
      <div class="brand-text">
        <h1>Peaceweaver Exponential</h1>
        <p>Regenerative Intelligence Platform</p>
      </div>
    </div>
    
    <nav class="nav-system" role="navigation">
      <button class="nav-tab active" data-view="overview">Command Center</button>
      <button class="nav-tab" data-view="projects">Projects</button>
      <button class="nav-tab" data-view="impact">Impact Models</button>
      <button class="nav-tab" data-view="learn">Learn</button>
      <button class="nav-tab" data-view="network">Network</button>
    </nav>
    
    <div class="header-actions">
      <button class="action-btn">
        <span>üîî</span>
        <span>Alerts</span>
      </button>
      <button class="action-btn primary">
        <span>+</span>
        <span>New Project</span>
      </button>
    </div>
  </div>
</header>

<!-- App Container -->
<div id="app-container">
  
  <!-- OVERVIEW VIEW - Command Center -->
  <div id="overview-view" class="view-container active">
    
    <!-- Mega Stats -->
    <div class="mega-stats">
      <div class="mega-stat" data-stat="stewards">
        <div class="stat-label">Global Stewards</div>
        <div class="stat-value">847K</div>
        <div class="stat-trend up">+24.7% MoM</div>
        <svg class="stat-sparkline" viewBox="0 0 100 40"></svg>
      </div>
      <div class="mega-stat" data-stat="projects">
        <div class="stat-label">Active Projects</div>
        <div class="stat-value">42.3K</div>
        <div class="stat-trend up">+18.2% MoM</div>
        <svg class="stat-sparkline" viewBox="0 0 100 40"></svg>
      </div>
      <div class="mega-stat" data-stat="hectares">
        <div class="stat-label">Hectares Restored</div>
        <div class="stat-value">6.7M</div>
        <div class="stat-trend up">+31.5% MoM</div>
        <svg class="stat-sparkline" viewBox="0 0 100 40"></svg>
      </div>
      <div class="mega-stat" data-stat="carbon">
        <div class="stat-label">Carbon Sequestered (tons)</div>
        <div class="stat-value">2.1M</div>
        <div class="stat-trend up">+28.9% MoM</div>
        <svg class="stat-sparkline" viewBox="0 0 100 40"></svg>
      </div>
    </div>
    
    <!-- Command Grid -->
    <div class="command-grid">
      
      <!-- Interactive World Map -->
      <div class="command-card span-12">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">üó∫Ô∏è</span>
            Global Activity Map
          </h2>
          <span class="card-badge">Real-Time</span>
        </div>
        <div class="world-map-container">
          <canvas id="world-map-canvas"></canvas>
          <div class="map-controls">
            <button class="map-control-btn" title="Zoom In">+</button>
            <button class="map-control-btn" title="Zoom Out">‚àí</button>
            <button class="map-control-btn" title="Reset View">‚ü≤</button>
          </div>
          <div class="map-legend">
            <div class="legend-item">
              <div class="legend-dot" style="background: #10b981;"></div>
              <span>High Activity (500+)</span>
            </div>
            <div class="legend-item">
              <div class="legend-dot" style="background: #3b82f6;"></div>
              <span>Medium Activity (100-500)</span>
            </div>
            <div class="legend-item">
              <div class="legend-dot" style="background: #8b5cf6;"></div>
              <span>Emerging (10-100)</span>
            </div>
            <div class="legend-item">
              <div class="legend-dot" style="background: #06b6d4;"></div>
              <span>New (<10)</span>
            </div>
          </div>
          <div class="map-tooltip" id="map-tooltip"></div>
        </div>
      </div>
      
      <!-- Growth Chart -->
      <div class="command-card span-6">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">üìà</span>
            Growth Trajectory
          </h2>
        </div>
        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">Steward Network Expansion</div>
            <div class="chart-filters">
              <button class="chart-filter active">6M</button>
              <button class="chart-filter">1Y</button>
              <button class="chart-filter">All</button>
            </div>
          </div>
          <canvas class="chart-canvas" id="growth-chart"></canvas>
        </div>
      </div>
      
      <!-- Impact Distribution -->
      <div class="command-card span-6">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">üéØ</span>
            Impact Distribution
          </h2>
        </div>
        <div class="chart-container">
          <div class="chart-header">
            <div class="chart-title">Projects by Category</div>
          </div>
          <canvas class="chart-canvas" id="distribution-chart"></canvas>
        </div>
      </div>
      
      <!-- Recent Activity Feed -->
      <div class="command-card span-12">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">‚ö°</span>
            Live Activity Stream
          </h2>
          <span class="card-badge">Live</span>
        </div>
        <div id="activity-stream"></div>
      </div>
      
    </div>
  </div>
  
  <!-- PROJECTS VIEW -->
  <div id="projects-view" class="view-container">
    <div class="search-bar">
      <span class="search-icon">üîç</span>
      <input type="text" class="search-input" placeholder="Search projects by name, location, or tags..." id="project-search">
    </div>
    
    <div class="filter-bar">
      <button class="filter-chip active" data-filter="all">All Projects</button>
      <button class="filter-chip" data-filter="ecological">üå± Ecological Restoration</button>
      <button class="filter-chip" data-filter="peace">ü§ù Peace Building</button>
      <button class="filter-chip" data-filter="education">üìö Education</button>
      <button class="filter-chip" data-filter="agriculture">üåæ Regenerative Agriculture</button>
      <button class="filter-chip" data-filter="community">üèòÔ∏è Community Resilience</button>
    </div>
    
    <div class="project-grid" id="projects-grid"></div>
  </div>
  
  <!-- IMPACT MODELS VIEW -->
  <div id="impact-view" class="view-container">
    <h1 style="font-family: var(--font-display); font-size: 2.5rem; margin-bottom: var(--space-xl); color: var(--emerald-300);">
      Impact Modeling & Calculation
    </h1>
    
    <div class="calculator-panel">
      <div class="calc-section">
        <h3 class="calc-section-title">
          <span>üå≥</span>
          Carbon Sequestration Calculator
        </h3>
        
        <div class="input-group">
          <label class="input-label">Land Area (hectares)</label>
          <input type="number" class="input-field" id="calc-area" value="100" min="1">
        </div>
        
        <div class="input-group">
          <label class="input-label">Restoration Method</label>
          <select class="input-field" id="calc-method">
            <option value="agroforestry">Agroforestry (High Impact)</option>
            <option value="reforestation">Reforestation (Medium Impact)</option>
            <option value="cover-crops">Cover Crops (Moderate Impact)</option>
            <option value="grassland">Grassland Restoration (Lower Impact)</option>
          </select>
        </div>
        
        <div class="input-group">
          <label class="input-label">Project Duration (years): <span id="duration-value">10</span></label>
          <input type="range" class="slider-input" id="calc-duration" min="1" max="30" value="10">
          <div class="slider-value">
            <span>1 year</span>
            <span>30 years</span>
          </div>
        </div>
        
        <div class="input-group">
          <label class="input-label">Implementation Efficiency (%): <span id="efficiency-value">80</span></label>
          <input type="range" class="slider-input" id="calc-efficiency" min="50" max="100" value="80">
          <div class="slider-value">
            <span>50%</span>
            <span>100%</span>
          </div>
        </div>
        
        <button class="action-btn primary" style="width: 100%; padding: var(--space-lg); font-size: 1.1rem;" onclick="calculateImpact()">
          Calculate Impact
        </button>
      </div>
      
      <div id="calc-results" class="hidden"></div>
    </div>
  </div>
  
  <!-- LEARN VIEW -->
  <div id="learn-view" class="view-container">
    <h1 style="font-family: var(--font-display); font-size: 2.5rem; margin-bottom: var(--space-xl); color: var(--emerald-300);">
      Educational Modules
    </h1>
    
    <div class="module-grid" id="modules-grid"></div>
  </div>
  
  <!-- NETWORK VIEW -->
  <div id="network-view" class="view-container">
    <h1 style="font-family: var(--font-display); font-size: 2.5rem; margin-bottom: var(--space-xl); color: var(--emerald-300);">
      Steward Network Graph
    </h1>
    
    <div class="network-container">
      <canvas id="network-canvas"></canvas>
      <div class="network-info">
        <h4 style="color: var(--emerald-300); margin-bottom: var(--space-md);">Network Metrics</h4>
        <div class="network-stat">
          <span class="network-stat-label">Nodes:</span>
          <span class="network-stat-value" id="network-nodes">0</span>
        </div>
        <div class="network-stat">
          <span class="network-stat-label">Connections:</span>
          <span class="network-stat-value" id="network-edges">0</span>
        </div>
        <div class="network-stat">
          <span class="network-stat-label">Clusters:</span>
          <span class="network-stat-value" id="network-clusters">0</span>
        </div>
        <div class="network-stat">
          <span class="network-stat-label">Density:</span>
          <span class="network-stat-value" id="network-density">0</span>
        </div>
      </div>
    </div>
    
    <div style="margin-top: var(--space-2xl);">
      <h2 style="font-size: 1.5rem; color: var(--emerald-300); margin-bottom: var(--space-lg);">
        Network Analysis
      </h2>
      <div class="command-grid">
        <div class="command-card span-4">
          <h3 style="color: var(--text-primary); margin-bottom: var(--space-md);">Central Hubs</h3>
          <div id="central-hubs-list"></div>
        </div>
        <div class="command-card span-4">
          <h3 style="color: var(--text-primary); margin-bottom: var(--space-md);">Emerging Communities</h3>
          <div id="emerging-communities-list"></div>
        </div>
        <div class="command-card span-4">
          <h3 style="color: var(--text-primary); margin-bottom: var(--space-md);">Growth Opportunities</h3>
          <div id="growth-opportunities-list"></div>
        </div>
      </div>
    </div>
  </div>
  
</div>

<!-- Notification Container -->
<div class="notification-container" id="notification-container"></div>

<!-- Modal System -->
<div class="modal-overlay" id="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title" id="modal-title">Modal Title</h2>
      <button class="modal-close" id="modal-close">‚úï</button>
    </div>
    <div class="modal-body" id="modal-body">
      Modal content goes here
    </div>
  </div>
</div>

<script>
'use strict';

/* =================================================================
   EXPONENTIAL AMPLIFICATION ENGINE
   This represents 100X expansion with advanced features
================================================================= */

// ============== GLOBAL STATE MANAGEMENT ==============
const AppState = {
  currentView: 'overview',
  projects: [],
  modules: [],
  networkData: { nodes: [], edges: [] },
  filters: { active: 'all' },
  mapData: [],
  stats: {
    stewards: 847234,
    projects: 42347,
    hectares: 6789456,
    carbon: 2134567
  }
};

// ============== PARTICLE SYSTEM ==============
(function initParticleSystem() {
  const canvas = document.getElementById('particle-field');
  const ctx = canvas.getContext('2d');
  
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  
  const particles = [];
  const particleCount = 100;
  
  class Particle {
    constructor() {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height;
      this.size = Math.random() * 2 + 0.5;
      this.speedX = (Math.random() - 0.5) * 0.3;
      this.speedY = (Math.random() - 0.5) * 0.3;
      this.opacity = Math.random() * 0.5 + 0.2;
      this.color = Math.random() > 0.5 ? '52, 211, 153' : '6, 182, 212';
    }
    
    update() {
      this.x += this.speedX;
      this.y += this.speedY;
      
      if (this.x > canvas.width) this.x = 0;
      if (this.x < 0) this.x = canvas.width;
      if (this.y > canvas.height) this.y = 0;
      if (this.y < 0) this.y = canvas.height;
    }
    
    draw() {
      ctx.fillStyle = `rgba(${this.color}, ${this.opacity})`;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
      
      ctx.shadowBlur = 15;
      ctx.shadowColor = `rgba(${this.color}, ${this.opacity})`;
    }
  }
  
  for (let i = 0; i < particleCount; i++) {
    particles.push(new Particle());
  }
  
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    particles.forEach(particle => {
      particle.update();
      particle.draw();
    });
    
    // Draw connections
    for (let i = 0; i < particles.length; i++) {
      for (let j = i + 1; j < particles.length; j++) {
        const dx = particles[i].x - particles[j].x;
        const dy = particles[i].y - particles[j].y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance < 120) {
          ctx.strokeStyle = `rgba(52, 211, 153, ${0.2 * (1 - distance / 120)})`;
          ctx.lineWidth = 0.5;
          ctx.beginPath();
          ctx.moveTo(particles[i].x, particles[i].y);
          ctx.lineTo(particles[j].x, particles[j].y);
          ctx.stroke();
        }
      }
    }
    
    requestAnimationFrame(animate);
  }
  
  animate();
  
  window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });
})();

// ============== NAVIGATION SYSTEM ==============
document.querySelectorAll('.nav-tab').forEach(tab => {
  tab.addEventListener('click', () => {
    const view = tab.dataset.view;
    switchView(view);
    
    document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
  });
});

function switchView(viewName) {
  document.querySelectorAll('.view-container').forEach(view => {
    view.classList.remove('active');
  });
  
  document.getElementById(`${viewName}-view`).classList.add('active');
  AppState.currentView = viewName;
  
  // Initialize view-specific content
  if (viewName === 'projects' && AppState.projects.length === 0) {
    initProjects();
  } else if (viewName === 'learn' && AppState.modules.length === 0) {
    initModules();
  } else if (viewName === 'network') {
    initNetwork();
  }
}

// ============== MEGA STATS ANIMATION ==============
function animateStats() {
  const stats = document.querySelectorAll('.mega-stat');
  
  stats.forEach(stat => {
    const statKey = stat.dataset.stat;
    const targetValue = AppState.stats[statKey];
    const valueElement = stat.querySelector('.stat-value');
    
    let current = 0;
    const increment = targetValue / 100;
    const duration = 2000;
    const stepTime = duration / 100;
    
    const timer = setInterval(() => {
      current += increment;
      if (current >= targetValue) {
        valueElement.textContent = formatNumber(targetValue);
        clearInterval(timer);
      } else {
        valueElement.textContent = formatNumber(Math.floor(current));
      }
    }, stepTime);
    
    // Generate sparkline
    generateSparkline(stat.querySelector('.stat-sparkline'), statKey);
    
    // Add mouse tracking effect
    stat.addEventListener('mousemove', (e) => {
      const rect = stat.getBoundingClientRect();
      const x = ((e.clientX - rect.left) / rect.width) * 100;
      const y = ((e.clientY - rect.top) / rect.height) * 100;
      stat.style.setProperty('--x', `${x}%`);
      stat.style.setProperty('--y', `${y}%`);
    });
  });
}

function formatNumber(num) {
  if (num >= 1000000) {
    return (num / 1000000).toFixed(1) + 'M';
  } else if (num >= 1000) {
    return (num / 1000).toFixed(1) + 'K';
  }
  return num.toString();
}

function generateSparkline(svg, statKey) {
  // Generate random historical data
  const points = 20;
  const data = [];
  let value = AppState.stats[statKey] * 0.7;
  
  for (let i = 0; i < points; i++) {
    value += (Math.random() - 0.3) * (value * 0.1);
    data.push(Math.max(0, value));
  }
  
  const max = Math.max(...data);
  const width = 100;
  const height = 40;
  
  const pathData = data.map((val, i) => {
    const x = (i / (points - 1)) * width;
    const y = height - (val / max) * height;
    return `${i === 0 ? 'M' : 'L'} ${x},${y}`;
  }).join(' ');
  
  svg.innerHTML = `
    <path d="${pathData}" fill="none" stroke="rgba(52, 211, 153, 0.6)" stroke-width="2"/>
    <path d="${pathData} L 100,40 L 0,40 Z" fill="rgba(52, 211, 153, 0.1)"/>
  `;
}

// ============== WORLD MAP VISUALIZATION ==============
(function initWorldMap() {
  const canvas = document.getElementById('world-map-canvas');
  const ctx = canvas.getContext('2d');
  const tooltip = document.getElementById('map-tooltip');
  
  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;
  
  // Generate synthetic location data
  const locations = [];
  for (let i = 0; i < 150; i++) {
    locations.push({
      lat: (Math.random() * 160) - 80,
      lon: (Math.random() * 340) - 170,
      activity: Math.floor(Math.random() * 1000),
      name: `Region ${i + 1}`,
      projects: Math.floor(Math.random() * 50) + 1,
      stewards: Math.floor(Math.random() * 500) + 10
    });
  }
  
  AppState.mapData = locations;
  
  let zoom = 1;
  let offsetX = 0;
  let offsetY = 0;
  
  function drawMap() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Draw grid lines
    ctx.strokeStyle = 'rgba(52, 211, 153, 0.1)';
    ctx.lineWidth = 0.5;
    
    for (let lat = -80; lat <= 80; lat += 20) {
      const y = ((lat + 90) / 180) * canvas.height * zoom + offsetY;
      ctx.beginPath();
      ctx.moveTo(0, y);
      ctx.lineTo(canvas.width, y);
      ctx.stroke();
    }
    
    for (let lon = -180; lon <= 180; lon += 30) {
      const x = ((lon + 180) / 360) * canvas.width * zoom + offsetX;
      ctx.beginPath();
      ctx.moveTo(x, 0);
      ctx.lineTo(x, canvas.height);
      ctx.stroke();
    }
    
    // Draw locations
    locations.forEach(loc => {
      const x = ((loc.lon + 180) / 360) * canvas.width * zoom + offsetX;
      const y = ((90 - loc.lat) / 180) * canvas.height * zoom + offsetY;
      
      let color, size;
      if (loc.activity >= 500) {
        color = '#10b981';
        size = 8;
      } else if (loc.activity >= 100) {
        color = '#3b82f6';
        size = 6;
      } else if (loc.activity >= 10) {
        color = '#8b5cf6';
        size = 4;
      } else {
        color = '#06b6d4';
        size = 3;
      }
      
      // Draw pulsing ring
      ctx.beginPath();
      ctx.arc(x, y, size + 4, 0, Math.PI * 2);
      ctx.strokeStyle = color;
      ctx.lineWidth = 2;
      ctx.globalAlpha = 0.3;
      ctx.stroke();
      
      // Draw marker
      ctx.beginPath();
      ctx.arc(x, y, size, 0, Math.PI * 2);
      ctx.fillStyle = color;
      ctx.globalAlpha = 0.8;
      ctx.fill();
      ctx.shadowBlur = 10;
      ctx.shadowColor = color;
      ctx.fill();
      ctx.shadowBlur = 0;
      ctx.globalAlpha = 1;
      
      loc.screenX = x;
      loc.screenY = y;
    });
  }
  
  drawMap();
  
  canvas.addEventListener('mousemove', (e) => {
    const rect = canvas.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;
    
    let found = false;
    for (const loc of locations) {
      const dx = mouseX - loc.screenX;
      const dy = mouseY - loc.screenY;
      const distance = Math.sqrt(dx * dx + dy * dy);
      
      if (distance < 15) {
        tooltip.innerHTML = `
          <div style="font-weight: 600; margin-bottom: 8px; color: var(--emerald-300);">${loc.name}</div>
          <div style="font-size: 0.9rem; color: var(--text-secondary);">
            <div>Activity Level: ${loc.activity}</div>
            <div>Projects: ${loc.projects}</div>
            <div>Stewards: ${loc.stewards}</div>
          </div>
        `;
        tooltip.style.left = `${e.clientX + 15}px`;
        tooltip.style.top = `${e.clientY + 15}px`;
        tooltip.classList.add('visible');
        found = true;
        break;
      }
    }
    
    if (!found) {
      tooltip.classList.remove('visible');
    }
  });
  
  canvas.addEventListener('mouseleave', () => {
    tooltip.classList.remove('visible');
  });
  
  // Zoom controls
  document.querySelectorAll('.map-control-btn').forEach((btn, index) => {
    btn.addEventListener('click', () => {
      if (index === 0) zoom = Math.min(zoom * 1.2, 3);
      else if (index === 1) zoom = Math.max(zoom / 1.2, 1);
      else { zoom = 1; offsetX = 0; offsetY = 0; }
      drawMap();
    });
  });
})();

// ============== CHARTS SYSTEM ==============
(function initCharts() {
  // Growth Chart
  const growthCanvas = document.getElementById('growth-chart');
  if (growthCanvas) {
    const ctx = growthCanvas.getContext('2d');
    const width = growthCanvas.width = growthCanvas.offsetWidth;
    const height = growthCanvas.height = growthCanvas.offsetHeight;
    
    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
    const data = [120000, 185000, 280000, 420000, 615000, 847000];
    const max = Math.max(...data);
    
    ctx.strokeStyle = '#10b981';
    ctx.lineWidth = 3;
    ctx.beginPath();
    
    data.forEach((val, i) => {
      const x = (i / (data.length - 1)) * (width - 40) + 20;
      const y = height - 40 - (val / max) * (height - 80);
      
      if (i === 0) ctx.moveTo(x, y);
      else ctx.lineTo(x, y);
      
      // Draw point
      ctx.fillStyle = '#10b981';
      ctx.beginPath();
      ctx.arc(x, y, 5, 0, Math.PI * 2);
      ctx.fill();
      
      // Draw label
      ctx.fillStyle = '#8b949e';
      ctx.font = '12px var(--font-body)';
      ctx.textAlign = 'center';
      ctx.fillText(months[i], x, height - 15);
      ctx.fillText(formatNumber(val), x, y - 10);
    });
    
    ctx.stroke();
    
    // Draw gradient fill
    const gradient = ctx.createLinearGradient(0, 0, 0, height);
    gradient.addColorStop(0, 'rgba(16, 185, 129, 0.3)');
    gradient.addColorStop(1, 'rgba(16, 185, 129, 0)');
    
    ctx.beginPath();
    ctx.moveTo(20, height - 40);
    data.forEach((val, i) => {
      const x = (i / (data.length - 1)) * (width - 40) + 20;
      const y = height - 40 - (val / max) * (height - 80);
      ctx.lineTo(x, y);
    });
    ctx.lineTo(width - 20, height - 40);
    ctx.closePath();
    ctx.fillStyle = gradient;
    ctx.fill();
  }
  
  // Distribution Chart
  const distCanvas = document.getElementById('distribution-chart');
  if (distCanvas) {
    const ctx = distCanvas.getContext('2d');
    const width = distCanvas.width = distCanvas.offsetWidth;
    const height = distCanvas.height = distCanvas.offsetHeight;
    
    const categories = [
      { label: 'Restoration', value: 12456, color: '#10b981' },
      { label: 'Peace Building', value: 8234, color: '#3b82f6' },
      { label: 'Education', value: 6789, color: '#8b5cf6' },
      { label: 'Agriculture', value: 9876, color: '#06b6d4' },
      { label: 'Community', value: 4992, color: '#fbbf24' }
    ];
    
    const total = categories.reduce((sum, cat) => sum + cat.value, 0);
    let currentAngle = -Math.PI / 2;
    const centerX = width / 2;
    const centerY = height / 2;
    const radius = Math.min(width, height) / 2 - 40;
    
    categories.forEach(cat => {
      const sliceAngle = (cat.value / total) * Math.PI * 2;
      
      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
      ctx.closePath();
      
      ctx.fillStyle = cat.color;
      ctx.fill();
      
      ctx.strokeStyle = '#0d1117';
      ctx.lineWidth = 2;
      ctx.stroke();
      
      // Draw label
      const labelAngle = currentAngle + sliceAngle / 2;
      const labelX = centerX + Math.cos(labelAngle) * (radius + 20);
      const labelY = centerY + Math.sin(labelAngle) * (radius + 20);
      
      ctx.fillStyle = cat.color;
      ctx.font = '12px var(--font-body)';
      ctx.textAlign = 'center';
      ctx.fillText(cat.label, labelX, labelY);
      ctx.fillText(formatNumber(cat.value), labelX, labelY + 15);
      
      currentAngle += sliceAngle;
    });
  }
})();

// ============== PROJECTS SYSTEM ==============
function initProjects() {
  const projectTypes = [
    { type: 'ecological', icon: 'üå±', name: 'Ecological Restoration' },
    { type: 'peace', icon: 'ü§ù', name: 'Peace Building' },
    { type: 'education', icon: 'üìö', name: 'Education' },
    { type: 'agriculture', icon: 'üåæ', name: 'Regenerative Agriculture' },
    { type: 'community', icon: 'üèòÔ∏è', name: 'Community Resilience' }
  ];
  
  const locations = [
    'Rwanda', 'Brazil', 'Kenya', 'India', 'Mexico', 'USA', 'Nepal', 'Ethiopia',
    'Peru', 'Indonesia', 'Colombia', 'Ghana', 'Vietnam', 'Morocco', 'Philippines'
  ];
  
  const statuses = ['active', 'planning', 'completed'];
  
  for (let i = 0; i < 24; i++) {
    const projectType = projectTypes[Math.floor(Math.random() * projectTypes.length)];
    const status = statuses[Math.floor(Math.random() * statuses.length)];
    const progress = Math.floor(Math.random() * 100);
    
    AppState.projects.push({
      id: i + 1,
      type: projectType.type,
      icon: projectType.icon,
      name: `${projectType.name} Project ${i + 1}`,
      location: locations[Math.floor(Math.random() * locations.length)],
      status: status,
      progress: progress,
      hectares: Math.floor(Math.random() * 5000) + 100,
      stewards: Math.floor(Math.random() * 200) + 10,
      carbon: Math.floor(Math.random() * 50000) + 1000
    });
  }
  
  renderProjects();
}

function renderProjects(filter = 'all') {
  const grid = document.getElementById('projects-grid');
  grid.innerHTML = '';
  
  const filtered = filter === 'all' 
    ? AppState.projects 
    : AppState.projects.filter(p => p.type === filter);
  
  filtered.forEach(project => {
    const card = document.createElement('div');
    card.className = 'project-card';
    card.innerHTML = `
      <div class="project-header">
        <div>
          <div class="project-title">${project.icon} ${project.name}</div>
          <div class="project-location">üìç ${project.location}</div>
        </div>
        <div class="project-status status-${project.status}">
          ${project.status.toUpperCase()}
        </div>
      </div>
      
      <div class="project-metrics">
        <div class="project-metric">
          <div class="metric-value">${formatNumber(project.hectares)}</div>
          <div class="metric-label">Hectares</div>
        </div>
        <div class="project-metric">
          <div class="metric-value">${project.stewards}</div>
          <div class="metric-label">Stewards</div>
        </div>
        <div class="project-metric">
          <div class="metric-value">${formatNumber(project.carbon)}</div>
          <div class="metric-label">CO‚ÇÇ (tons)</div>
        </div>
      </div>
      
      <div class="project-progress">
        <div class="progress-label">
          <span>Progress</span>
          <span>${project.progress}%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" style="width: ${project.progress}%"></div>
        </div>
      </div>
    `;
    grid.appendChild(card);
  });
}

// Project Filters
document.querySelectorAll('.filter-chip').forEach(chip => {
  chip.addEventListener('click', () => {
    document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
    chip.classList.add('active');
    
    const filter = chip.dataset.filter;
    renderProjects(filter);
  });
});

// ============== IMPACT CALCULATOR ==============
function calculateImpact() {
  const area = parseFloat(document.getElementById('calc-area').value);
  const method = document.getElementById('calc-method').value;
  const duration = parseInt(document.getElementById('calc-duration').value);
  const efficiency = parseInt(document.getElementById('calc-efficiency').value) / 100;
  
  const sequestrationRates = {
    'agroforestry': 12.5,
    'reforestation': 8.3,
    'cover-crops': 5.2,
    'grassland': 3.1
  };
  
  const rate = sequestrationRates[method];
  const totalCarbon = area * rate * duration * efficiency;
  const co2Equivalent = totalCarbon * 3.67;
  const carEquivalent = Math.floor(co2Equivalent / 4.6);
  const treesEquivalent = Math.floor(totalCarbon / 0.02);
  
  const resultsPanel = document.getElementById('calc-results');
  resultsPanel.className = 'results-panel';
  resultsPanel.innerHTML = `
    <h3 class="results-title">Projected Impact Over ${duration} Years</h3>
    <div class="results-grid">
      <div class="result-item">
        <div class="result-value">${formatNumber(Math.floor(totalCarbon))}</div>
        <div class="result-label">Tons Carbon</div>
      </div>
      <div class="result-item">
        <div class="result-value">${formatNumber(Math.floor(co2Equivalent))}</div>
        <div class="result-label">Tons CO‚ÇÇe</div>
      </div>
      <div class="result-item">
        <div class="result-value">${formatNumber(carEquivalent)}</div>
        <div class="result-label">Cars Off Road</div>
      </div>
      <div class="result-item">
        <div class="result-value">${formatNumber(treesEquivalent)}</div>
        <div class="result-label">Tree Equivalent</div>
      </div>
    </div>
    <div style="margin-top: var(--space-xl); padding: var(--space-lg); background: rgba(16, 185, 129, 0.1); border-radius: 12px; border: 1px solid var(--emerald-500);">
      <p style="color: var(--text-secondary); line-height: 1.6;">
        <strong style="color: var(--emerald-300);">Methodology:</strong> Calculations based on peer-reviewed research 
        from regenerative agriculture studies (2024-2025). Sequestration rates vary by soil type, climate, and 
        implementation quality. This calculator uses conservative estimates from meta-analyses published in 
        CABI Agriculture & Bioscience and Frontiers in Ecology.
      </p>
    </div>
  `;
}

// Update slider value displays
document.getElementById('calc-duration')?.addEventListener('input', (e) => {
  document.getElementById('duration-value').textContent = e.target.value;
});

document.getElementById('calc-efficiency')?.addEventListener('input', (e) => {
  document.getElementById('efficiency-value').textContent = e.target.value;
});

// ============== EDUCATIONAL MODULES ==============
function initModules() {
  const modules = [
    {
      icon: 'üå±',
      title: 'Regenerative Agriculture Fundamentals',
      duration: '3 hours',
      lessons: 12,
      description: 'Master soil health, carbon sequestration, and regenerative farming practices backed by peer-reviewed research.',
      progress: 75
    },
    {
      icon: 'ü§ù',
      title: 'Conflict Resolution & Mediation',
      duration: '2.5 hours',
      lessons: 10,
      description: 'Evidence-based peace-building techniques including indigenous practices and trauma-informed approaches.',
      progress: 40
    },
    {
      icon: 'üìä',
      title: 'Impact Measurement & Reporting',
      duration: '2 hours',
      lessons: 8,
      description: 'Learn to measure community resilience using validated frameworks like BRIC and CART.',
      progress: 60
    },
    {
      icon: 'üåç',
      title: 'Biodiversity Monitoring Techniques',
      duration: '3.5 hours',
      lessons: 14,
      description: 'Master AI-powered monitoring, passive acoustic techniques, and citizen science approaches.',
      progress: 20
    },
    {
      icon: 'üíö',
      title: 'Trauma-Informed Community Care',
      duration: '4 hours',
      lessons: 16,
      description: 'SAMHSA-aligned practices for creating healing-centered communities and supporting collective wellbeing.',
      progress: 0
    },
    {
      icon: 'üî¨',
      title: 'Climate Science & Solutions',
      duration: '3 hours',
      lessons: 11,
      description: 'Understand climate mechanisms, impacts, and nature-based solutions grounded in latest IPCC research.',
      progress: 85
    }
  ];
  
  const grid = document.getElementById('modules-grid');
  grid.innerHTML = '';
  
  modules.forEach(module => {
    const card = document.createElement('div');
    card.className = 'module-card';
    card.innerHTML = `
      <div class="module-thumbnail">
        <span>${module.icon}</span>
      </div>
      <div class="module-body">
        <div class="module-title">${module.title}</div>
        <div class="module-meta">
          <span>‚è±Ô∏è ${module.duration}</span>
          <span>üìö ${module.lessons} lessons</span>
        </div>
        <div class="module-description">${module.description}</div>
        <div class="module-progress">
          <span class="progress-text">${module.progress === 0 ? 'Not Started' : 'In Progress'}</span>
          <span class="progress-percentage">${module.progress}%</span>
        </div>
      </div>
    `;
    grid.appendChild(card);
  });
  
  AppState.modules = modules;
}

// ============== NETWORK GRAPH VISUALIZATION ==============
function initNetwork() {
  const canvas = document.getElementById('network-canvas');
  const ctx = canvas.getContext('2d');
  
  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;
  
  // Generate network data
  const nodes = [];
  const edges = [];
  const nodeCount = 50;
  
  for (let i = 0; i < nodeCount; i++) {
    nodes.push({
      id: i,
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      vx: (Math.random() - 0.5) * 2,
      vy: (Math.random() - 0.5) * 2,
      connections: 0,
      size: Math.random() * 5 + 3
    });
  }
  
  // Create connections
  for (let i = 0; i < nodeCount; i++) {
    const connectionCount = Math.floor(Math.random() * 3) + 1;
    for (let j = 0; j < connectionCount; j++) {
      const target = Math.floor(Math.random() * nodeCount);
      if (target !== i && !edges.find(e => (e.from === i && e.to === target) || (e.from === target && e.to === i))) {
        edges.push({ from: i, to: target });
        nodes[i].connections++;
        nodes[target].connections++;
      }
    }
  }
  
  AppState.networkData = { nodes, edges };
  
  // Update metrics
  document.getElementById('network-nodes').textContent = nodes.length;
  document.getElementById('network-edges').textContent = edges.length;
  document.getElementById('network-clusters').textContent = Math.floor(nodes.length / 8);
  document.getElementById('network-density').textContent = (edges.length / (nodes.length * (nodes.length - 1) / 2)).toFixed(3);
  
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Update node positions (simplified physics)
    nodes.forEach(node => {
      node.x += node.vx;
      node.y += node.vy;
      
      if (node.x < 0 || node.x > canvas.width) node.vx *= -1;
      if (node.y < 0 || node.y > canvas.height) node.vy *= -1;
      
      node.x = Math.max(0, Math.min(canvas.width, node.x));
      node.y = Math.max(0, Math.min(canvas.height, node.y));
    });
    
    // Draw edges
    edges.forEach(edge => {
      const from = nodes[edge.from];
      const to = nodes[edge.to];
      
      ctx.beginPath();
      ctx.moveTo(from.x, from.y);
      ctx.lineTo(to.x, to.y);
      ctx.strokeStyle = 'rgba(52, 211, 153, 0.2)';
      ctx.lineWidth = 1;
      ctx.stroke();
    });
    
    // Draw nodes
    nodes.forEach(node => {
      const intensity = Math.min(node.connections / 5, 1);
      const color = `rgba(${16 + intensity * 236}, ${185 + intensity * 26}, ${129 + intensity * 24}, 0.8)`;
      
      ctx.beginPath();
      ctx.arc(node.x, node.y, node.size, 0, Math.PI * 2);
      ctx.fillStyle = color;
      ctx.fill();
      
      ctx.shadowBlur = 10;
      ctx.shadowColor = color;
      ctx.fill();
      ctx.shadowBlur = 0;
    });
    
    requestAnimationFrame(animate);
  }
  
  animate();
}

// ============== ACTIVITY STREAM ==============
function initActivityStream() {
  const activities = [
    { icon: 'üå±', title: 'New restoration project started', location: 'Kenya', time: '2 min ago', type: 'success' },
    { icon: 'ü§ù', title: 'Peace dialogue completed', location: 'Colombia', time: '5 min ago', type: 'success' },
    { icon: 'üìö', title: '250 students enrolled in module', location: 'India', time: '12 min ago', type: 'info' },
    { icon: 'üåæ', title: 'Harvest data uploaded', location: 'Brazil', time: '18 min ago', type: 'success' },
    { icon: 'üíß', title: 'Water project milestone reached', location: 'Morocco', time: '25 min ago', type: 'success' },
    { icon: 'üî¨', title: 'Research findings published', location: 'Global', time: '34 min ago', type: 'info' },
    { icon: 'üèòÔ∏è', title: 'Community meeting held', location: 'Nepal', time: '41 min ago', type: 'info' },
    { icon: 'üìä', title: 'Impact report generated', location: 'Ethiopia', time: '1 hour ago', type: 'success' }
  ];
  
  const stream = document.getElementById('activity-stream');
  stream.innerHTML = activities.map(activity => `
    <div style="display: flex; gap: var(--space-lg); align-items: start; padding: var(--space-lg); border-bottom: 1px solid var(--border-secondary); transition: background 0.2s;">
      <span style="font-size: 2rem;">${activity.icon}</span>
      <div style="flex: 1;">
        <div style="font-weight: 600; color: var(--text-primary); margin-bottom: var(--space-xs);">
          ${activity.title}
        </div>
        <div style="font-size: 0.85rem; color: var(--text-secondary); display: flex; gap: var(--space-md);">
          <span>üìç ${activity.location}</span>
          <span>‚Ä¢</span>
          <span>${activity.time}</span>
        </div>
      </div>
      <span style="width: 8px; height: 8px; background: var(--emerald-500); border-radius: 50%; margin-top: 8px;"></span>
    </div>
  `).join('');
}

// ============== NOTIFICATION SYSTEM ==============
function showNotification(title, message, type = 'success') {
  const container = document.getElementById('notification-container');
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  
  const icons = {
    success: '‚úì',
    warning: '‚ö†Ô∏è',
    error: '‚úï',
    info: '‚ÑπÔ∏è'
  };
  
  notification.innerHTML = `
    <div class="notification-icon">${icons[type]}</div>
    <div class="notification-content">
      <div class="notification-title">${title}</div>
      <div class="notification-message">${message}</div>
    </div>
  `;
  
  container.appendChild(notification);
  
  setTimeout(() => {
    notification.style.opacity = '0';
    notification.style.transform = 'translateX(400px)';
    setTimeout(() => notification.remove(), 300);
  }, 5000);
}

// ============== MODAL SYSTEM ==============
function showModal(title, content) {
  const overlay = document.getElementById('modal-overlay');
  const modalTitle = document.getElementById('modal-title');
  const modalBody = document.getElementById('modal-body');
  
  modalTitle.textContent = title;
  modalBody.innerHTML = content;
  overlay.classList.add('active');
}

document.getElementById('modal-close')?.addEventListener('click', () => {
  document.getElementById('modal-overlay').classList.remove('active');
});

document.getElementById('modal-overlay')?.addEventListener('click', (e) => {
  if (e.target.id === 'modal-overlay') {
    e.target.classList.remove('active');
  }
});

// ============== INITIALIZATION ==============
document.addEventListener('DOMContentLoaded', () => {
  animateStats();
  initCharts();
  initActivityStream();
  
  showNotification(
    'System Online',
    'Peaceweaver Exponential platform initialized successfully',
    'success'
  );
  
  console.log('%cüåç PEACEWEAVER EXPONENTIAL', 'color: #10b981; font-size: 20px; font-weight: bold;');
  console.log('%c100X Feature Amplification Active', 'color: #34d399; font-size: 14px;');
  console.log('%cAdvanced Systems: ‚úì Map ‚úì Charts ‚úì Network ‚úì Projects ‚úì Impact Models ‚úì Education', 'color: #6ee7b7; font-size: 12px;');
});

// ============== KEYBOARD SHORTCUTS ==============
document.addEventListener('keydown', (e) => {
  // Ctrl/Cmd + K: Search
  if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
    e.preventDefault();
    document.querySelector('.search-input')?.focus();
  }
  
  // Escape: Close modals
  if (e.key === 'Escape') {
    document.getElementById('modal-overlay').classList.remove('active');
  }
  
  // Number keys: Quick navigation
  if (e.key >= '1' && e.key <= '5') {
    const views = ['overview', 'projects', 'impact', 'learn', 'network'];
    const index = parseInt(e.key) - 1;
    if (index < views.length) {
      switchView(views[index]);
      document.querySelectorAll('.nav-tab')[index]?.click();
    }
  }
});

</script>

</body>
</html>
