<!DOCTYPE html>
<html lang="en" data-theme="aurora">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Peaceweaver - Enhanced Gamification</title>
<style>
:root{--bg:#0a1628;--bg2:#0f1f35;--bg3:#152844;--card:#1a3052;--text:#e8f4f8;--text2:#a8c5d4;--muted:#6b8fa8;--accent:#4fd1c5;--accent2:#63b3ed;--accent3:#9f7aea;--border:#2a4a6a;--success:#48bb78;--warn:#ecc94b;--error:#fc8181;--glow:rgba(79,209,197,0.3)}
[data-theme="sunset"]{--bg:#1a0f0a;--bg2:#2d1810;--bg3:#3d2218;--card:#4d2c20;--text:#faf0e6;--text2:#d4a574;--muted:#a67c52;--accent:#f59e0b;--accent2:#ef4444;--accent3:#ec4899;--border:#5d3628;--success:#84cc16;--warn:#fbbf24;--error:#f87171;--glow:rgba(245,158,11,0.3)}
[data-theme="forest"]{--bg:#0d1f14;--bg2:#14291c;--bg3:#1a3324;--card:#203d2c;--text:#e8f5e9;--text2:#a5d6a7;--muted:#66bb6a;--accent:#4caf50;--accent2:#8bc34a;--accent3:#009688;--border:#2e5a3a;--success:#66bb6a;--warn:#ffeb3b;--error:#ef5350;--glow:rgba(76,175,80,0.3)}
[data-theme="ocean"]{--bg:#0a1929;--bg2:#0d2137;--bg3:#102945;--card:#133153;--text:#e3f2fd;--text2:#90caf9;--muted:#42a5f5;--accent:#00bcd4;--accent2:#03a9f4;--accent3:#3f51b5;--border:#1e4976;--success:#26a69a;--warn:#ffca28;--error:#ef5350;--glow:rgba(0,188,212,0.3)}
[data-theme="cyber"]{--bg:#0a0a0f;--bg2:#12121a;--bg3:#1a1a25;--card:#222230;--text:#f0f0ff;--text2:#00ff88;--muted:#ff00ff;--accent:#00ffff;--accent2:#ff00ff;--accent3:#ffff00;--border:#333345;--success:#00ff88;--warn:#ffff00;--error:#ff3366;--glow:rgba(0,255,255,0.4)}
[data-theme="sakura"]{--bg:#fdf2f8;--bg2:#fce7f3;--bg3:#fbcfe8;--card:#fff;--text:#831843;--text2:#be185d;--muted:#db2777;--accent:#ec4899;--accent2:#f472b6;--accent3:#a855f7;--border:#f9a8d4;--success:#34d399;--warn:#fbbf24;--error:#f87171;--glow:rgba(236,72,153,0.2)}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Georgia,serif;background:var(--bg);color:var(--text);line-height:1.7;min-height:100vh}
::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:var(--bg2)}::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px}
button{font-family:inherit;cursor:pointer;border:none;background:none}
.hidden{display:none!important}
#splash{position:fixed;inset:0;z-index:500;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:2rem;transition:opacity .8s}
#splash.hidden{opacity:0;pointer-events:none}
#splash::before{content:"";position:absolute;inset:0;background:radial-gradient(ellipse at center,var(--glow) 0%,transparent 70%)}
.splash-content{position:relative;z-index:1;max-width:700px}
.splash-logo{width:120px;height:120px;margin:0 auto 2rem;animation:pulse 3s infinite}
@keyframes pulse{0%,100%{filter:drop-shadow(0 0 10px var(--glow))}50%{filter:drop-shadow(0 0 30px var(--glow))}}
.splash-title{font-size:clamp(2rem,5vw,3.5rem);letter-spacing:4px;margin-bottom:1rem;background:linear-gradient(135deg,var(--accent),var(--accent2),var(--accent3));-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:fadeUp 1s ease .3s both}
.splash-subtitle{font-size:1.1rem;color:var(--text2);max-width:550px;margin:0 auto 4rem;animation:fadeUp 1s ease .5s both}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.splash-btn{padding:1rem 4rem;font-size:1.1rem;font-weight:600;letter-spacing:2px;background:linear-gradient(135deg,var(--accent),var(--accent2));color:var(--bg);border-radius:16px;transition:transform .3s,box-shadow .3s;animation:fadeUp 1s ease .7s both}
.splash-btn:hover{transform:scale(1.05);box-shadow:0 0 30px var(--glow)}
#app{display:none;min-height:100vh}#app.visible{display:block}
#header{position:sticky;top:0;z-index:200;background:var(--bg2);border-bottom:1px solid var(--border);backdrop-filter:blur(10px);padding:.5rem 1rem}
.header-inner{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto}
.site-title{font-size:1.3rem;font-weight:600;color:var(--accent);letter-spacing:2px}
.theme-btns{display:flex;gap:.5rem}
.theme-btn{padding:.5rem;background:var(--bg3);border:1px solid var(--border);border-radius:8px;font-size:1rem;transition:all .15s}
.theme-btn:hover,.theme-btn.active{background:var(--accent);color:var(--bg)}
#hud{position:fixed;top:80px;right:1rem;z-index:300;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:1rem;width:280px;box-shadow:0 8px 32px rgba(0,0,0,.3);max-height:calc(100vh - 100px);overflow-y:auto;transition:transform .3s}
#hud.collapsed{transform:translateX(calc(100% + 2rem))}
.hud-toggle{position:absolute;left:-40px;top:.5rem;width:36px;height:36px;background:var(--card);border:1px solid var(--border);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;transition:all .15s}
.hud-toggle:hover{background:var(--accent);color:var(--bg)}
.hud-header{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid var(--border)}
.hud-avatar{width:56px;height:56px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;box-shadow:0 0 20px var(--glow)}
.hud-user{flex:1}
.hud-name{font-weight:600;font-size:1rem}
.hud-title{font-size:.8rem;color:var(--accent);display:flex;align-items:center;gap:4px}
.hud-section{margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid var(--border)}
.hud-section:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}
.hud-section-title{font-size:.7rem;font-weight:600;color:var(--accent);margin-bottom:.5rem;text-transform:uppercase;letter-spacing:1px}
.level-display{display:flex;align-items:center;gap:1rem;margin-bottom:.5rem}
.level-badge{width:50px;height:50px;background:linear-gradient(135deg,var(--accent),var(--accent3));border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.3rem;font-weight:700;color:var(--bg);box-shadow:0 0 25px var(--glow)}
.level-info{flex:1}
.level-name{font-size:.9rem;font-weight:600}
.level-xp{font-size:.75rem;color:var(--muted)}
.progress-bar{height:10px;background:var(--bg3);border-radius:5px;overflow:hidden}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2));border-radius:5px;transition:width .3s}
.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem}
.stat-item{background:var(--bg3);padding:.75rem;border-radius:8px;text-align:center}
.stat-number{font-size:1.3rem;font-weight:700;color:var(--accent)}
.stat-label{font-size:.65rem;color:var(--muted)}
.streak-display{display:flex;align-items:center;gap:1rem;padding:.75rem;background:linear-gradient(135deg,var(--warn),#f97316);border-radius:12px;color:var(--bg)}
.streak-icon{font-size:32px;animation:flicker 1s infinite}
@keyframes flicker{0%,100%{opacity:1}50%{opacity:.7}}
.streak-info{flex:1}
.streak-count{font-size:1.5rem;font-weight:700}
.streak-label{font-size:.7rem;opacity:.8}
.streak-bonus{font-size:.65rem;background:rgba(0,0,0,.2);padding:2px 8px;border-radius:8px}
.quests-list{display:flex;flex-direction:column;gap:.5rem}
.quest-item{background:var(--bg3);border-radius:10px;padding:.75rem;display:flex;align-items:center;gap:.75rem}
.quest-item.completed{opacity:.5}
.quest-item.completed .quest-check{background:var(--success);border-color:var(--success);color:#fff}
.quest-icon{width:36px;height:36px;background:var(--card);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px}
.quest-info{flex:1}
.quest-name{font-size:.8rem;font-weight:600}
.quest-progress{font-size:.65rem;color:var(--muted)}
.quest-reward{font-size:.7rem;color:var(--warn);font-weight:600}
.quest-check{width:22px;height:22px;border:2px solid var(--border);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;color:transparent}
.achievements-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem}
.achievement{aspect-ratio:1;background:var(--bg3);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:help;transition:all .15s}
.achievement.earned{background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:0 0 15px var(--glow)}
.achievement.locked{opacity:.3;filter:grayscale(1)}
.achievement:hover{transform:scale(1.1)}
.rewards-btn{width:100%;padding:.75rem;background:linear-gradient(135deg,var(--accent3),var(--accent));border-radius:12px;color:var(--bg);font-weight:600;font-size:.9rem;display:flex;align-items:center;justify-content:center;gap:.5rem}
.rewards-btn:hover{transform:translateY(-2px);box-shadow:0 4px 15px var(--glow)}
.coins-display{background:rgba(0,0,0,.2);padding:4px 10px;border-radius:8px}
.leaderboard{display:flex;flex-direction:column;gap:4px}
.leader-item{display:flex;align-items:center;gap:.75rem;padding:.5rem;background:var(--bg3);border-radius:8px;font-size:.8rem}
.leader-item.you{background:linear-gradient(135deg,var(--accent),var(--accent2));color:var(--bg)}
.leader-rank{width:20px;font-weight:700;text-align:center}
.leader-name{flex:1}
.leader-score{font-weight:600}
#content{padding:2rem 1rem 2rem calc(1rem);max-width:900px;margin:0 auto}
@media(min-width:1024px){#content{margin-right:320px}}
.section{margin-bottom:4rem}
.section-header{text-align:center;margin-bottom:2rem}
.section-icon{width:80px;height:80px;margin:0 auto 1rem;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:36px;box-shadow:0 0 30px var(--glow);animation:float 6s infinite ease-in-out}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.section-title{font-size:clamp(1.8rem,4vw,2.5rem);margin-bottom:.5rem;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.section-subtitle{font-size:1.1rem;color:var(--text2)}
.feature-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.5rem;margin-top:2rem}
.feature-card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:1.5rem;transition:all .3s;position:relative}
.feature-card:hover{transform:translateY(-4px);box-shadow:0 8px 30px rgba(0,0,0,.2);border-color:var(--accent)}
.feature-xp{position:absolute;top:.75rem;right:.75rem;background:var(--accent);color:var(--bg);font-size:.7rem;font-weight:600;padding:2px 8px;border-radius:8px}
.feature-icon{width:56px;height:56px;background:var(--bg3);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:28px;margin-bottom:1rem}
.feature-title{font-size:1.1rem;font-weight:600;margin-bottom:.5rem}
.feature-desc{font-size:.95rem;color:var(--text2);line-height:1.6}
.quote{padding:1.5rem;margin:2rem 0;border-left:4px solid var(--accent);background:var(--bg3);border-radius:0 12px 12px 0;position:relative}
.quote::before{content:'"';position:absolute;top:-10px;left:10px;font-size:50px;color:var(--accent);opacity:.3}
.quote-text{font-size:1.1rem;font-style:italic;margin-bottom:.5rem}
.quote-attr{font-size:.9rem;color:var(--muted)}
.collapsible{margin:1rem 0;border:1px solid var(--border);border-radius:12px;overflow:hidden}
.collapsible-header{display:flex;align-items:center;justify-content:space-between;padding:1rem;background:var(--bg3);cursor:pointer}
.collapsible-header:hover{background:var(--card)}
.collapsible-title{font-weight:600;display:flex;align-items:center;gap:.5rem}
.collapsible-icon{transition:transform .15s}
.collapsible.open .collapsible-icon{transform:rotate(180deg)}
.collapsible-content{max-height:0;overflow:hidden;transition:max-height .3s}
.collapsible.open .collapsible-content{max-height:1000px}
.collapsible-body{padding:1rem;background:var(--bg2)}
.collapsible-body h4{margin:1rem 0 .5rem;color:var(--accent)}
.actions{display:flex;flex-wrap:wrap;gap:.75rem;margin-top:1.5rem}
.action-btn{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;background:var(--bg3);border:1px solid var(--border);border-radius:12px;color:var(--text2);font-size:.9rem;position:relative;transition:all .15s}
.action-btn:hover{background:var(--accent);color:var(--bg);border-color:var(--accent);transform:translateY(-2px)}
.action-btn .xp-badge{position:absolute;top:-8px;right:-8px;background:var(--warn);color:var(--bg);font-size:.65rem;font-weight:700;padding:2px 6px;border-radius:8px}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:400;padding:2rem}
.modal-overlay.active{display:flex}
.modal{background:var(--card);border:1px solid var(--border);border-radius:16px;max-width:500px;width:100%;max-height:90vh;overflow:hidden}
.modal-header{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;background:linear-gradient(135deg,var(--accent),var(--accent2));color:var(--bg)}
.modal-title{font-size:1.2rem;font-weight:600}
.modal-close{width:32px;height:32px;background:rgba(0,0,0,.2);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1.2rem}
.modal-close:hover{background:rgba(0,0,0,.4)}
.modal-body{padding:1.5rem;overflow-y:auto;max-height:60vh}
.modal-footer{padding:1rem 1.5rem;border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.rewards-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}
.reward-item{background:var(--bg3);border:2px solid var(--border);border-radius:12px;padding:1rem;text-align:center;cursor:pointer;transition:all .15s}
.reward-item:hover{border-color:var(--accent);transform:translateY(-2px)}
.reward-item.owned{border-color:var(--success);opacity:.6}
.reward-icon{font-size:36px;margin-bottom:.5rem}
.reward-name{font-size:.85rem;font-weight:600;margin-bottom:4px}
.reward-cost{font-size:.75rem;color:var(--warn);font-weight:600}
.levelup-overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:600}
.levelup-overlay.active{display:flex}
.levelup-content{text-align:center;animation:levelupBounce 1s ease}
@keyframes levelupBounce{0%{transform:scale(0);opacity:0}50%{transform:scale(1.2)}100%{transform:scale(1);opacity:1}}
.levelup-badge{width:140px;height:140px;background:linear-gradient(135deg,var(--accent),var(--accent3));border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:56px;margin:0 auto 2rem;box-shadow:0 0 80px var(--glow);animation:levelupPulse 1s infinite}
@keyframes levelupPulse{0%,100%{box-shadow:0 0 40px var(--glow)}50%{box-shadow:0 0 80px var(--glow)}}
.levelup-title{font-size:2.5rem;color:var(--accent);margin-bottom:.5rem}
.levelup-level{font-size:4rem;font-weight:700;margin-bottom:1rem}
.levelup-rewards{font-size:1.2rem;color:var(--warn);margin-bottom:2rem}
#toasts{position:fixed;top:80px;right:1rem;z-index:400;display:flex;flex-direction:column;gap:.5rem;pointer-events:none}
.toast{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1rem;min-width:300px;box-shadow:0 8px 32px rgba(0,0,0,.3);display:flex;align-items:flex-start;gap:12px;animation:toastIn .3s ease;pointer-events:auto}
.toast.hiding{animation:toastOut .3s ease forwards}
@keyframes toastIn{from{opacity:0;transform:translateX(100%)}to{opacity:1;transform:translateX(0)}}
@keyframes toastOut{to{opacity:0;transform:translateX(100%)}}
.toast-icon{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px}
.toast.success .toast-icon{background:var(--success);color:#fff}
.toast.warning .toast-icon{background:var(--warn);color:var(--bg)}
.toast.error .toast-icon{background:var(--error);color:#fff}
.toast.info .toast-icon{background:var(--accent);color:var(--bg)}
.toast.xp .toast-icon{background:linear-gradient(135deg,var(--warn),#f97316);color:var(--bg)}
.toast.achievement .toast-icon{background:linear-gradient(135deg,var(--accent),var(--accent3));color:var(--bg)}
.toast-content{flex:1}
.toast-title{font-weight:600;font-size:.95rem}
.toast-message{font-size:.8rem;color:var(--muted);margin-top:2px}
.toast-close{background:none;border:none;color:var(--muted);font-size:1.2rem;cursor:pointer;padding:4px}
#footer{background:var(--bg2);border-top:1px solid var(--border);padding:3rem 1rem;margin-top:4rem}
.footer-content{max-width:900px;margin:0 auto}
.zero-harm{background:var(--bg3);border:1px solid var(--accent);border-radius:16px;padding:1.5rem;margin-bottom:1.5rem}
.zero-harm-title{display:flex;align-items:center;gap:.5rem;font-size:1.1rem;font-weight:600;color:var(--accent);margin-bottom:1rem}
.zero-harm-text{font-size:.9rem;color:var(--text2);line-height:1.7}
.zero-harm-text strong{color:var(--text)}
.footer-copyright{text-align:center;font-size:.8rem;color:var(--muted)}
@media(max-width:1024px){#hud{top:auto;bottom:1rem;width:260px;max-height:50vh}}
</style>
</head>
<body>
<div id="splash">
<div class="splash-content">
<div class="splash-logo"><svg viewBox="0 0 100 100" fill="none"><circle cx="50" cy="50" r="45" stroke="url(#g1)" stroke-width="2"/><path d="M50 20L65 45 50 40 35 45Z" fill="url(#g1)"/><path d="M50 80L35 55 50 60 65 55Z" fill="url(#g1)"/><circle cx="50" cy="50" r="8" fill="url(#g1)"/><defs><linearGradient id="g1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:var(--accent)"/><stop offset="100%" style="stop-color:var(--accent3)"/></linearGradient></defs></svg></div>
<h1 class="splash-title">PEACEWEAVER</h1>
<p class="splash-subtitle">A citizen-powered peace architecture with complete gamification system ‚Äî XP, levels, achievements, daily quests, rewards shop, and leaderboard.</p>
<button class="splash-btn" id="enter-btn">Begin Your Journey</button>
</div>
</div>

<div id="app">
<header id="header">
<div class="header-inner">
<h1 class="site-title">‚ú¶ PEACEWEAVER</h1>
<div class="theme-btns">
<button class="theme-btn active" data-theme="aurora" title="Aurora">üåå</button>
<button class="theme-btn" data-theme="sunset" title="Sunset">üåÖ</button>
<button class="theme-btn" data-theme="forest" title="Forest">üå≤</button>
<button class="theme-btn" data-theme="ocean" title="Ocean">üåä</button>
<button class="theme-btn" data-theme="cyber" title="Cyber">üí´</button>
<button class="theme-btn" data-theme="sakura" title="Sakura">üå∏</button>
</div>
</div>
</header>

<aside id="hud">
<button class="hud-toggle">‚óÄ</button>
<div class="hud-header">
<div class="hud-avatar" id="hud-avatar">üå±</div>
<div class="hud-user">
<div class="hud-name">Peaceweaver</div>
<div class="hud-title" id="hud-title">üåø Seedling</div>
</div>
</div>
<div class="hud-section">
<div class="hud-section-title">‚≠ê Level Progress</div>
<div class="level-display">
<div class="level-badge" id="level-badge">1</div>
<div class="level-info">
<div class="level-name" id="level-name">Seedling</div>
<div class="level-xp"><span id="current-xp">0</span> / <span id="next-xp">100</span> XP</div>
</div>
</div>
<div class="progress-bar"><div class="progress-fill" id="xp-progress" style="width:0%"></div></div>
</div>
<div class="hud-section">
<div class="hud-section-title">üî• Streak</div>
<div class="streak-display">
<span class="streak-icon">üî•</span>
<div class="streak-info">
<div class="streak-count" id="streak-count">0</div>
<div class="streak-label">day streak</div>
</div>
<span class="streak-bonus" id="streak-bonus">+0% XP</span>
</div>
</div>
<div class="hud-section">
<div class="hud-section-title">üìä Statistics</div>
<div class="stats-grid">
<div class="stat-item"><div class="stat-number" id="stat-sections">0</div><div class="stat-label">Explored</div></div>
<div class="stat-item"><div class="stat-number" id="stat-actions">0</div><div class="stat-label">Actions</div></div>
<div class="stat-item"><div class="stat-number" id="stat-time">0m</div><div class="stat-label">Time</div></div>
<div class="stat-item"><div class="stat-number" id="stat-coins">0</div><div class="stat-label">‚ú® Coins</div></div>
</div>
</div>
<div class="hud-section">
<div class="hud-section-title">üìã Daily Quests</div>
<div class="quests-list" id="quests-list"></div>
</div>
<div class="hud-section">
<div class="hud-section-title">üèÜ Achievements (<span id="achievement-count">0</span>/12)</div>
<div class="achievements-grid" id="achievements-grid"></div>
</div>
<div class="hud-section">
<div class="hud-section-title">üèÖ Leaderboard</div>
<div class="leaderboard" id="leaderboard"></div>
</div>
<div class="hud-section">
<button class="rewards-btn" id="rewards-btn">üéÅ Rewards Shop <span class="coins-display">‚ú® <span id="shop-coins">0</span></span></button>
</div>
</aside>

<main id="content">
<section class="section" id="biosphere">
<div class="section-header">
<div class="section-icon">üåç</div>
<h2 class="section-title">Biospheric Cascades</h2>
<p class="section-subtitle">Ecology as neutral ground for cooperation</p>
</div>
<p>The biosphere knows no borders. Rivers flow between nations, forests span boundaries, and migratory birds carry seeds across invisible lines. Ecological cooperation serves as the foundation for peace.</p>
<div class="quote">
<p class="quote-text">"The earth does not belong to us; we belong to the earth."</p>
<p class="quote-attr">‚Äî Indigenous Wisdom</p>
</div>
<div class="feature-grid">
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üå≥</div><h3 class="feature-title">Transboundary Forests</h3><p class="feature-desc">Joint forest management bringing communities together through shared conservation.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üíß</div><h3 class="feature-title">Shared Watersheds</h3><p class="feature-desc">River basin cooperation ensuring clean water flows freely for all communities.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">ü¶Ö</div><h3 class="feature-title">Migration Corridors</h3><p class="feature-desc">Protected pathways for wildlife connecting ecosystems across borders.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üåæ</div><h3 class="feature-title">Seed Networks</h3><p class="feature-desc">Community seed banks preserving heritage varieties and agricultural knowledge.</p></div>
</div>
<div class="collapsible" data-collapsible="bio">
<div class="collapsible-header">
<span class="collapsible-title">üìñ Restoration Protocols (+25 XP)</span>
<span class="collapsible-icon">‚ñº</span>
</div>
<div class="collapsible-content">
<div class="collapsible-body">
<h4>Phase 1: Assessment</h4>
<p>Comprehensive ecological surveys documenting shared ecosystems with local knowledge keepers from all sides.</p>
<h4>Phase 2: Engagement</h4>
<p>Cross-border gatherings where communities share observations, build trust through shared meals and storytelling.</p>
<h4>Phase 3: Planning</h4>
<p>Collaborative restoration plans respecting both ecological needs and community livelihoods.</p>
<h4>Phase 4: Action</h4>
<p>Joint restoration activities with ceremonies, cleanups, and ongoing monitoring programs.</p>
</div>
</div>
</div>
<div class="actions">
<button class="action-btn" data-action="viewMap"><span class="xp-badge">+10</span>üó∫Ô∏è View Map</button>
<button class="action-btn" data-action="joinPlanting"><span class="xp-badge">+20</span>üå± Join Planting</button>
<button class="action-btn" data-action="reportWildlife"><span class="xp-badge">+15</span>üì∏ Report Wildlife</button>
</div>
</section>

<section class="section" id="shadows">
<div class="section-header">
<div class="section-icon">üé≠</div>
<h2 class="section-title">Cultural Shadow Exchange</h2>
<p class="section-subtitle">The unnoticed threads that unite peoples</p>
</div>
<p>Beneath the headlines of conflict lies vast shared heritage. The same lullabies sung to children, similar superstitions about weather, nearly identical recipes, common sayings that translate almost word-for-word.</p>
<div class="feature-grid">
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üç≤</div><h3 class="feature-title">Shared Recipes</h3><p class="feature-desc">Borscht, varenyky, blini‚Äîfoods that cross borders and unite people around the table.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üéµ</div><h3 class="feature-title">Lullabies & Songs</h3><p class="feature-desc">Melodies that rock children to sleep often share common roots across cultures.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üòÑ</div><h3 class="feature-title">Shared Humor</h3><p class="feature-desc">Jokes about weather, bureaucracy, and family life that connect humans everywhere.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üîÆ</div><h3 class="feature-title">Superstitions</h3><p class="feature-desc">Don't whistle indoors, knock on wood‚Äîshared beliefs revealing common heritage.</p></div>
</div>
<div class="actions">
<button class="action-btn" data-action="shareRecipe"><span class="xp-badge">+25</span>üç≥ Share Recipe</button>
<button class="action-btn" data-action="recordSong"><span class="xp-badge">+30</span>üé§ Record Song</button>
</div>
</section>

<section class="section" id="heroes">
<div class="section-header">
<div class="section-icon">‚öîÔ∏è</div>
<h2 class="section-title">Parallel Hero Narratives</h2>
<p class="section-subtitle">Mythic universes where heroes unite</p>
</div>
<p>Every culture has heroes‚Äîfigures embodying courage and wisdom. What if we created stories where heroes from different nations stand together against shared threats: winter's cold, natural disasters, hunger?</p>
<div class="quote">
<p class="quote-text">"In the oldest stories, heroes did not fight each other. They fought against the darkness together."</p>
<p class="quote-attr">‚Äî Storyteller's Wisdom</p>
</div>
<div class="feature-grid">
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">‚ùÑÔ∏è</div><h3 class="feature-title">Winter Alliance</h3><p class="feature-desc">Stories of heroes joining forces to survive the harshest season‚Äîsharing fire, food, shelter.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üå™Ô∏è</div><h3 class="feature-title">Chaos Guardians</h3><p class="feature-desc">Narratives of cooperation against natural disasters‚Äîfloods, fires, earthquakes.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üèóÔ∏è</div><h3 class="feature-title">The Builders</h3><p class="feature-desc">Tales of heroes who create rather than destroy‚Äîbuilding bridges, schools, homes.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üåæ</div><h3 class="feature-title">Harvest Keepers</h3><p class="feature-desc">Stories celebrating those who grow food and ensure no one goes hungry.</p></div>
</div>
<div class="collapsible" data-collapsible="story">
<div class="collapsible-header">
<span class="collapsible-title">‚úçÔ∏è Story Engine (+25 XP)</span>
<span class="collapsible-icon">‚ñº</span>
</div>
<div class="collapsible-content">
<div class="collapsible-body">
<p>The Story Engine allows communities to collaboratively create new hero narratives. Writers, artists, and storytellers from different backgrounds contribute chapters, illustrations, and plot branches to shared mythologies.</p>
<div class="actions">
<button class="action-btn" data-action="startStory"><span class="xp-badge">+50</span>üìù Begin Story</button>
<button class="action-btn" data-action="continueStory"><span class="xp-badge">+30</span>‚û°Ô∏è Continue</button>
</div>
</div>
</div>
</div>
</section>

<section class="section" id="tools">
<div class="section-header">
<div class="section-icon">üõ†Ô∏è</div>
<h2 class="section-title">Citizen Peace Tools</h2>
<p class="section-subtitle">Small tools anyone can use</p>
</div>
<p>Peace is not just the work of diplomats. It is built through countless small actions by ordinary people‚Äîkindness, skill-sharing, collaborative problem-solving.</p>
<div class="feature-grid">
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üí∞</div><h3 class="feature-title">Microgrants</h3><p class="feature-desc">Small grants for cross-border cooperation projects. Big peace starts with small seeds.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üîÑ</div><h3 class="feature-title">Skill Exchange</h3><p class="feature-desc">Match teachers with learners across borders. Every skill shared builds a bridge.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üíù</div><h3 class="feature-title">Kindness Quests</h3><p class="feature-desc">Daily challenges to perform small acts of kindness that cross divides.</p></div>
<div class="feature-card"><span class="feature-xp">+15 XP</span><div class="feature-icon">üß©</div><h3 class="feature-title">Collaborative Puzzles</h3><p class="feature-desc">Online puzzles only solvable through cooperation between communities.</p></div>
</div>
<div class="actions">
<button class="action-btn" data-action="applyGrant"><span class="xp-badge">+40</span>üí∞ Apply for Grant</button>
<button class="action-btn" data-action="offerSkill"><span class="xp-badge">+25</span>üéì Offer Skill</button>
<button class="action-btn" data-action="startQuest"><span class="xp-badge">+15</span>üíù Start Quest</button>
</div>
</section>

<section class="section" id="memory">
<div class="section-header">
<div class="section-icon">üïØÔ∏è</div>
<h2 class="section-title">Memory Weaving</h2>
<p class="section-subtitle">Honoring all who have suffered</p>
</div>
<p>Every conflict leaves behind grief that transcends political boundaries. Memory Weaving creates a shared space where losses on all sides can be mourned together‚Äîacknowledging our common humanity.</p>
<div class="quote">
<p class="quote-text">"We remember not to reopen wounds, but so that wounds may finally heal."</p>
<p class="quote-attr">‚Äî Memorial Inscription</p>
</div>
<div class="feature-grid">
<div class="feature-card"><span class="feature-xp">+20 XP</span><div class="feature-icon">üïØÔ∏è</div><h3 class="feature-title">Digital Candles</h3><p class="feature-desc">Light a candle in memory of someone lost. Watch thousands of flames flicker together.</p></div>
<div class="feature-card"><span class="feature-xp">+20 XP</span><div class="feature-icon">üìñ</div><h3 class="feature-title">Life Stories</h3><p class="feature-desc">Share stories of those who have passed‚Äîtheir dreams, their humor, their kindness.</p></div>
<div class="feature-card"><span class="feature-xp">+20 XP</span><div class="feature-icon">‚úçÔ∏è</div><h3 class="feature-title">Memorial Poems</h3><p class="feature-desc">A collection of poems written in remembrance. Poetry speaks across every language.</p></div>
<div class="feature-card"><span class="feature-xp">+20 XP</span><div class="feature-icon">üéµ</div><h3 class="feature-title">Voices Preserved</h3><p class="feature-desc">Audio recordings preserving the voices of those we've lost.</p></div>
</div>
<div class="actions">
<button class="action-btn" data-action="lightCandle"><span class="xp-badge">+10</span>üïØÔ∏è Light Candle</button>
<button class="action-btn" data-action="shareStory"><span class="xp-badge">+35</span>üìñ Share Story</button>
</div>
</section>
</main>

<footer id="footer">
<div class="footer-content">
<div class="zero-harm">
<h3 class="zero-harm-title">üïäÔ∏è Zero-Harm Commitment</h3>
<p class="zero-harm-text"><strong>This platform is designed exclusively for peaceful, restorative purposes.</strong> No tracking, surveillance, or weaponization. All data stored locally on your device via IndexedDB. Nothing is transmitted externally.</p>
</div>
<p class="footer-copyright">Peaceweaver ¬© 2025 ‚Äî Built for humanity, not extraction.</p>
</div>
</footer>
</div>

<div id="toasts"></div>

<div id="rewards-modal" class="modal-overlay">
<div class="modal">
<div class="modal-header">
<h2 class="modal-title">üéÅ Rewards Shop</h2>
<button class="modal-close">‚úï</button>
</div>
<div class="modal-body">
<div class="rewards-grid" id="rewards-grid"></div>
</div>
<div class="modal-footer">
<span style="color:var(--muted);font-size:.85rem">Your coins: <strong style="color:var(--warn)">‚ú® <span id="modal-coins">0</span></strong></span>
<button class="action-btn" onclick="document.getElementById('rewards-modal').classList.remove('active')">Close</button>
</div>
</div>
</div>

<div id="levelup-overlay" class="levelup-overlay">
<div class="levelup-content">
<div class="levelup-badge" id="levelup-icon">üå±</div>
<div class="levelup-title">LEVEL UP!</div>
<div class="levelup-level">Level <span id="levelup-number">2</span></div>
<div class="levelup-rewards">+50 ‚ú® Coins Earned!</div>
<button class="splash-btn" onclick="document.getElementById('levelup-overlay').classList.remove('active')">Continue</button>
</div>
</div>

<script>
// GAMIFICATION SYSTEM
const LEVELS=[{name:'Seedling',icon:'üå±',xp:0},{name:'Sprout',icon:'üåø',xp:100},{name:'Sapling',icon:'üå≥',xp:250},{name:'Gardener',icon:'üë®‚Äçüåæ',xp:500},{name:'Grove Keeper',icon:'üèïÔ∏è',xp:1000},{name:'Forest Guardian',icon:'ü¶å',xp:2000},{name:'Watershed Protector',icon:'üåä',xp:3500},{name:'Bridge Builder',icon:'üåâ',xp:5500},{name:'Peace Architect',icon:'üèõÔ∏è',xp:8000},{name:'Harmony Weaver',icon:'‚ú®',xp:12000},{name:'World Healer',icon:'üåç',xp:18000},{name:'Cosmic Peacekeeper',icon:'üåå',xp:25000}];
const ACHIEVEMENTS=[{id:'first',name:'First Steps',desc:'Enter platform',icon:'üë£'},{id:'explorer',name:'Explorer',desc:'Visit 5 sections',icon:'üß≠'},{id:'engaged',name:'Engaged',desc:'10 actions',icon:'‚≠ê'},{id:'dedicated',name:'Dedicated',desc:'7-day streak',icon:'üî•'},{id:'scholar',name:'Scholar',desc:'Read all protocols',icon:'üìö'},{id:'storyteller',name:'Storyteller',desc:'Start a story',icon:'‚úçÔ∏è'},{id:'connector',name:'Connector',desc:'25 actions',icon:'ü§ù'},{id:'veteran',name:'Veteran',desc:'30-day streak',icon:'üèÜ'},{id:'peacemaker',name:'Peacemaker',desc:'Level 5',icon:'üïäÔ∏è'},{id:'master',name:'Master',desc:'Level 10',icon:'üëë'},{id:'collector',name:'Collector',desc:'500 coins',icon:'üíé'},{id:'legend',name:'Legend',desc:'10000 XP',icon:'üåü'}];
const REWARDS=[{id:'avatar_phoenix',name:'Phoenix Avatar',cost:150,icon:'üî•'},{id:'avatar_dragon',name:'Dragon Avatar',cost:200,icon:'üêâ'},{id:'avatar_unicorn',name:'Unicorn Avatar',cost:200,icon:'ü¶Ñ'},{id:'title_champion',name:'"Champion" Title',cost:250,icon:'üèÖ'},{id:'title_legend',name:'"Legend" Title',cost:500,icon:'‚ö°'},{id:'xp_boost',name:'2x XP Boost',cost:75,icon:'üöÄ'}];
const QUESTS=[{id:'visit3',name:'Explore 3 Sections',target:3,xp:30,icon:'üó∫Ô∏è',type:'visit'},{id:'actions5',name:'Complete 5 Actions',target:5,xp:40,icon:'‚ö°',type:'actions'},{id:'collapsible2',name:'Read 2 Protocols',target:2,xp:25,icon:'üìñ',type:'collapsible'}];

let db,state={xp:0,level:1,coins:0,streak:0,lastVisit:null,sections:[],actions:0,collapsibles:[],achievements:{},rewards:[],avatar:'üå±',title:'Seedling',questProgress:{},questDate:null,start:Date.now()};

// IndexedDB
async function initDB(){return new Promise((r,j)=>{const q=indexedDB.open('peaceweaver_game',1);q.onerror=()=>j();q.onsuccess=()=>{db=q.result;r()};q.onupgradeneeded=e=>e.target.result.createObjectStore('state',{keyPath:'id'})})}
async function save(){if(db)db.transaction('state','readwrite').objectStore('state').put({id:'s',...state})}
async function load(){if(!db)return;return new Promise(r=>{const q=db.transaction('state','readonly').objectStore('state').get('s');q.onsuccess=()=>{if(q.result)state={...state,...q.result};state.start=Date.now();r()};q.onerror=()=>r()})}

// Level system
function getLvl(xp){let l=1;for(let i=LEVELS.length-1;i>=0;i--)if(xp>=LEVELS[i].xp){l=i+1;break}const c=LEVELS[Math.min(l-1,11)],n=LEVELS[Math.min(l,11)];return{level:l,name:c.name,icon:c.icon,into:xp-c.xp,need:n.xp-c.xp,pct:(xp-c.xp)/(n.xp-c.xp)}}

function addXP(amt,reason=''){const bonus=Math.min(state.streak*5,50),total=Math.floor(amt*(1+bonus/100)),old=getLvl(state.xp).level;state.xp+=total;state.coins+=Math.floor(total/10);const info=getLvl(state.xp);state.level=info.level;toast('xp',`+${total} XP`,reason);if(info.level>old){document.getElementById('levelup-icon').textContent=info.icon;document.getElementById('levelup-number').textContent=info.level;document.getElementById('levelup-overlay').classList.add('active');state.coins+=50}checkAchievements();updateHUD();save()}

function unlock(id){if(state.achievements[id])return;state.achievements[id]=true;const a=ACHIEVEMENTS.find(x=>x.id===id);toast('achievement','üèÜ Achievement!',a?.name||id);updateAchievements();save()}

function checkAchievements(){if(state.xp>=10000)unlock('legend');if(state.level>=5)unlock('peacemaker');if(state.level>=10)unlock('master');if(state.coins>=500)unlock('collector');if(state.actions>=10)unlock('engaged');if(state.actions>=25)unlock('connector');if(state.streak>=7)unlock('dedicated');if(state.streak>=30)unlock('veteran');if(state.sections.length>=5)unlock('explorer');if(state.collapsibles.length>=2)unlock('scholar')}

function updateAchievements(){const g=document.getElementById('achievements-grid');g.innerHTML=ACHIEVEMENTS.map(a=>`<div class="achievement ${state.achievements[a.id]?'earned':'locked'}" title="${a.name}: ${a.desc}">${a.icon}</div>`).join('');document.getElementById('achievement-count').textContent=Object.keys(state.achievements).length}

function initQuests(){const today=new Date().toDateString();if(state.questDate!==today){state.questProgress={};state.questDate=today}updateQuests()}

function questProgress(type,n=1){state.questProgress[type]=(state.questProgress[type]||0)+n;QUESTS.forEach(q=>{if(q.type===type&&!state.questProgress[q.id+'_done']&&(state.questProgress[type]||0)>=q.target){state.questProgress[q.id+'_done']=true;addXP(q.xp,`Quest: ${q.name}`);toast('success','üìã Quest Complete!',q.name)}});updateQuests();save()}

function updateQuests(){const l=document.getElementById('quests-list');l.innerHTML=QUESTS.map(q=>{const p=state.questProgress[q.type]||0,done=state.questProgress[q.id+'_done'];return`<div class="quest-item ${done?'completed':''}"><div class="quest-icon">${q.icon}</div><div class="quest-info"><div class="quest-name">${q.name}</div><div class="quest-progress">${Math.min(p,q.target)}/${q.target}</div></div><div class="quest-reward">+${q.xp}</div><div class="quest-check">${done?'‚úì':''}</div></div>`}).join('')}

function initRewards(){const g=document.getElementById('rewards-grid');g.innerHTML=REWARDS.map(r=>{const owned=state.rewards.includes(r.id);return`<div class="reward-item ${owned?'owned':''}" onclick="buyReward('${r.id}')"><div class="reward-icon">${r.icon}</div><div class="reward-name">${r.name}</div><div class="reward-cost">${owned?'‚úì Owned':'‚ú® '+r.cost}</div></div>`}).join('')}

function buyReward(id){if(state.rewards.includes(id)){toast('info','Already Owned','');return}const r=REWARDS.find(x=>x.id===id);if(!r)return;if(state.coins<r.cost){toast('error','Not Enough Coins',`Need ${r.cost-state.coins} more`);return}state.coins-=r.cost;state.rewards.push(id);if(id.startsWith('avatar_'))state.avatar=r.icon;if(id.startsWith('title_'))state.title=r.name.replace(/"/g,'');toast('success','üéÅ Purchased!',r.name);updateHUD();initRewards();save()}

function updateStreak(){const today=new Date().toDateString(),yest=new Date(Date.now()-86400000).toDateString();if(state.lastVisit===today)return;if(state.lastVisit===yest){state.streak++;toast('success','üî• Streak!',`${state.streak} days`)}else{if(state.streak>0)toast('warning','Streak Lost','');state.streak=1}state.lastVisit=today;checkAchievements();save()}

function updateLeaderboard(){const l=document.getElementById('leaderboard'),fake=[{n:'HarmonySeeker',s:15420},{n:'PeaceBuilder',s:12350},{n:'BridgeMaker',s:9870}],all=[...fake,{n:'You',s:state.xp,you:true}].sort((a,b)=>b.s-a.s);l.innerHTML=all.slice(0,4).map((e,i)=>`<div class="leader-item ${e.you?'you':''}"><span class="leader-rank">${i+1}</span><span class="leader-name">${e.n}</span><span class="leader-score">${e.s.toLocaleString()}</span></div>`).join('')}

function updateHUD(){const i=getLvl(state.xp);document.getElementById('hud-avatar').textContent=state.avatar;document.getElementById('hud-title').textContent=`${i.icon} ${state.title}`;document.getElementById('level-badge').textContent=i.level;document.getElementById('level-name').textContent=i.name;document.getElementById('current-xp').textContent=i.into;document.getElementById('next-xp').textContent=i.need;document.getElementById('xp-progress').style.width=Math.min(100,Math.round(i.pct*100))+'%';document.getElementById('streak-count').textContent=state.streak;document.getElementById('streak-bonus').textContent=`+${Math.min(state.streak*5,50)}% XP`;document.getElementById('stat-sections').textContent=state.sections.length;document.getElementById('stat-actions').textContent=state.actions;document.getElementById('stat-coins').textContent=state.coins;document.getElementById('stat-time').textContent=Math.floor((Date.now()-state.start)/60000)+'m';document.getElementById('shop-coins').textContent=state.coins;document.getElementById('modal-coins').textContent=state.coins;updateLeaderboard()}

function visit(id){if(!state.sections.includes(id)){state.sections.push(id);addXP(15,'Explored: '+id);questProgress('visit')}save()}

function action(name){state.actions++;questProgress('actions');const xp={viewMap:10,joinPlanting:20,reportWildlife:15,shareRecipe:25,recordSong:30,startStory:50,continueStory:30,applyGrant:40,offerSkill:25,startQuest:15,lightCandle:10,shareStory:35};addXP(xp[name]||10,name);if(name==='startStory')unlock('storyteller');save()}

function toast(type,title,msg){const c=document.getElementById('toasts'),t=document.createElement('div');t.className=`toast ${type}`;const icons={success:'‚úì',error:'‚úï',warning:'!',info:'i',xp:'‚≠ê',achievement:'üèÜ'};t.innerHTML=`<div class="toast-icon">${icons[type]||'i'}</div><div class="toast-content"><div class="toast-title">${title}</div>${msg?`<div class="toast-message">${msg}</div>`:''}</div><button class="toast-close" onclick="this.closest('.toast').remove()">‚úï</button>`;c.appendChild(t);setTimeout(()=>{t.classList.add('hiding');setTimeout(()=>t.remove(),300)},4000)}

// Init
document.getElementById('enter-btn').addEventListener('click',()=>{document.getElementById('splash').classList.add('hidden');document.getElementById('app').classList.add('visible');unlock('first');toast('success','Welcome, Peaceweaver!','Your journey begins now.')});

document.querySelectorAll('.theme-btn').forEach(b=>{b.addEventListener('click',()=>{document.querySelectorAll('.theme-btn').forEach(x=>x.classList.remove('active'));b.classList.add('active');document.documentElement.dataset.theme=b.dataset.theme})});

document.querySelector('.hud-toggle').addEventListener('click',()=>document.getElementById('hud').classList.toggle('collapsed'));

document.querySelectorAll('.collapsible-header').forEach(h=>{h.addEventListener('click',()=>{const c=h.closest('.collapsible'),id=c.dataset.collapsible;c.classList.toggle('open');if(c.classList.contains('open')&&id&&!state.collapsibles.includes(id)){state.collapsibles.push(id);addXP(25,'Read: '+id);questProgress('collapsible');save()}})});

document.querySelectorAll('[data-action]').forEach(b=>{b.addEventListener('click',()=>{action(b.dataset.action);toast('info','Action Triggered',`"${b.dataset.action}" coming soon!`)})});

document.getElementById('rewards-btn').addEventListener('click',()=>{initRewards();document.getElementById('rewards-modal').classList.add('active')});
document.querySelector('.modal-close').addEventListener('click',()=>document.getElementById('rewards-modal').classList.remove('active'));
document.getElementById('rewards-modal').addEventListener('click',e=>{if(e.target.id==='rewards-modal')e.target.classList.remove('active')});

// Section observer
const obs=new IntersectionObserver(e=>{e.forEach(en=>{if(en.isIntersecting)visit(en.target.id)})},{threshold:.3});
document.querySelectorAll('.section').forEach(s=>obs.observe(s));

// Time tracking
setInterval(()=>{document.getElementById('stat-time').textContent=Math.floor((Date.now()-state.start)/60000)+'m'},60000);

// Start
(async()=>{try{await initDB();await load()}catch(e){}updateStreak();initQuests();updateAchievements();updateHUD()})();
</script>
</body>
</html>
