<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Peaceweaver Multilingual Module</title>

<style>
html, body {
  margin:0; padding:0;
  font-family: "Segoe UI", sans-serif;
  background:#0b0f1a; color:#f0f0f0;
  height:100%;
  overflow:hidden;
}

/* Splash screen */
#splash {
  position:fixed;
  inset:0;
  background:linear-gradient(140deg,#1a243b,#0b0f1a 55%);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  opacity:1;
  transition:opacity 1s ease;
  z-index:1000;
}

#splash h1 {
  font-size:2.2em;
  letter-spacing:1px;
  margin:0;
  opacity:0;
  animation:fadeIn 1.2s forwards;
}
#splash p {
  margin-top:12px;
  opacity:0;
  animation:fadeIn 1.7s forwards;
}

@keyframes fadeIn { to { opacity:1; } }

#content {
  position:absolute;
  inset:0;
  padding:20px;
  overflow-y:auto;
  opacity:0;
  transition:opacity 1s ease;
}

/* Language selector */
#lang-select {
  position:fixed;
  top:15px; right:15px;
  background:#141c2b;
  padding:10px 14px;
  border-radius:6px;
  border:1px solid #29344d;
  cursor:pointer;
  z-index:2000;
  color:#fff;
}

/* Page text styling */
h2 { text-align:center; margin-top:20px; letter-spacing:1px; }
p  { opacity:0.9; line-height:1.5; }

/* Fade animation */
.fade-out { opacity:0 !important; }
.fade-in  { opacity:1 !important; }

/* Page turn animation */
.page-turn {
  animation:pt 0.7s ease forwards;
}
@keyframes pt {
  0%   { transform:rotateY(0deg); opacity:1; }
  100% { transform:rotateY(90deg); opacity:0; }
}
</style>
</head>
<body>

<!-- Language Switch -->
<select id="lang-select">
  <option value="en">English</option>
  <option value="ru">Русский</option>
  <option value="uk">Українська</option>
</select>

<!-- Splash Screen -->
<div id="splash">
  <h1 id="splash-title">Loading…</h1>
  <p id="splash-sub">Preparing module…</p>
</div>

<!-- Page Content -->
<div id="content">
  <h2 id="title"></h2>
  <p id="body"></p>
</div>

<script>
/* ------------------------------------------------------------------
   LANGUAGE DATA
------------------------------------------------------------------ */
const TEXT = {
  en: {
    splashTitle: "Welcome",
    splashSub: "Preparing module…",
    title: "Peaceweaver Module",
    body: `This is the English version of the module. You can switch the language
           above at any time. Switching languages triggers a brief splash
           transition for aesthetic continuity.`
  },
  ru: {
    splashTitle: "Добро пожаловать",
    splashSub: "Загрузка модуля…",
    title: "Модуль Peaceweaver",
    body: `Это русская версия модуля. Вы можете изменить язык выше в любое время.
           Переключение языка вызывает анимированный экран загрузки
           для плавного перехода.`
  },
  uk: {
    splashTitle: "Вітаємо",
    splashSub: "Завантаження модуля…",
    title: "Модуль Peaceweaver",
    body: `Це українська версія модуля. Ви можете змінювати мову у будь-який час.
           Перемикання викликає анімований заставковий екран
           для плавного переходу.`
  }
};

/* ------------------------------------------------------------------
   SPLASH → CONTENT ON FIRST LOAD
------------------------------------------------------------------ */
function showInitial() {
  const splash = document.getElementById("splash");
  const content = document.getElementById("content");
  setTimeout(() => {
    splash.classList.add("fade-out");
    setTimeout(() => {
      splash.style.display="none";
      content.classList.add("fade-in");
    }, 900);
  }, 1200);
}

/* ------------------------------------------------------------------
   UPDATE TEXT BASED ON LANGUAGE
------------------------------------------------------------------ */
function applyLanguage(lang) {
  const t = TEXT[lang];

  document.getElementById("splash-title").innerText = t.splashTitle;
  document.getElementById("splash-sub").innerText = t.splashSub;
  document.getElementById("title").innerText = t.title;
  document.getElementById("body").innerText = t.body;

  localStorage.setItem("pw_lang", lang);
}

/* ------------------------------------------------------------------
   LANGUAGE SWITCH HANDLER
------------------------------------------------------------------ */
document.getElementById("lang-select").addEventListener("change", e => {
  const lang = e.target.value;

  const splash = document.getElementById("splash");
  const content = document.getElementById("content");

  // Trigger page-turn effect
  content.classList.add("page-turn");

  setTimeout(() => {
    content.classList.remove("page-turn");
    content.classList.remove("fade-in");
    content.classList.add("fade-out");
  }, 50);

  // Splash reappears
  setTimeout(() => {
    splash.style.display = "flex";
    splash.classList.remove("fade-out");
    splash.classList.add("fade-in");
    applyLanguage(lang);
  }, 600);

  // Hide splash again
  setTimeout(() => {
    splash.classList.add("fade-out");
    setTimeout(() => {
      splash.style.display="none";
      content.classList.remove("fade-out");
      content.classList.add("fade-in");
    }, 900);
  }, 1800);
});

/* ------------------------------------------------------------------
   INIT
------------------------------------------------------------------ */
let lang = localStorage.getItem("pw_lang");

// Browser auto-detect fallback
if (!lang) {
  const user = navigator.language.substring(0,2);
  if (user === "ru") lang = "ru";
  else if (user === "uk") lang = "uk";
  else lang = "en";
}

document.getElementById("lang-select").value = lang;
applyLanguage(lang);
showInitial();
</script>

</body>
</html>
